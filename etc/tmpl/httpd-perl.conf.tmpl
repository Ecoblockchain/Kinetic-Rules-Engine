#
# Kynetx KOBJ system configuration
# 
# do not edit this file; auto-generated by install-httpd-conf.pl
#
# Timestamp: <TMPL_VAR NAME=GEN_DATE>
#



PerlRequire <TMPL_VAR NAME=KOBJ_ROOT>/startup.pl

# support client IP address in XFF header, if needed
# PerlSetVar  xForwardedForRequire 1  # only work behind a proxy...
PerlPostReadRequestHandler Apache2::xForwardedFor


<TMPL_IF NAME="GENDER_ACTION">
<LocationMatch /kobj/>
  # Eventually this ought to come from the client configuration DB
  PerlSetVar kobj_js_version <TMPL_VAR NAME=JS_VERSION>

  # host names
  PerlSetVar init_host <TMPL_VAR NAME=INIT_HOST>
  PerlSetVar log_host <TMPL_VAR NAME=LOG_HOST>
  PerlSetVar action_host <TMPL_VAR NAME=ACTION_HOST>

  # mode => development, production, test
  PerlSetVar run_mode <TMPL_VAR NAME=RUN_MODE>

  # database configuration
  PerlSetVar db_host <TMPL_VAR NAME=DB_HOST>
  PerlSetVar db_username <TMPL_VAR NAME=DB_USERNAME>
  PerlSetVar db_passwd <TMPL_VAR NAME=DB_PASSWD>

  <TMPL_IF NAME="MEMCACHED">
  PerlSetVar memcached_hosts <TMPL_VAR NAME=MEMCACHED_HOST_FIRST>
  <TMPL_LOOP NAME="MEMCACHED_HOSTS">
  PerlAddVar memcached_hosts <TMPL_VAR NAME=MEMCACHED_HOST>
  </TMPL_LOOP>
  </TMPL_IF>


  # URL for svn rule repository, username, password
  PerlSetVar svn_conn <TMPL_VAR NAME=RULE_REPOSITORY>

  SetHandler perl-script
  PerlHandler Kynetx
</LocationMatch>

</TMPL_IF>
<TMPL_IF NAME="GENDER_LOG">
<LocationMatch /log/>
  # host names
  PerlSetVar init_host <TMPL_VAR NAME=INIT_HOST>
  PerlSetVar log_host <TMPL_VAR NAME=LOG_HOST>
  PerlSetVar action_host <TMPL_VAR NAME=ACTION_HOST>

  # database configuration
  PerlSetVar db_host <TMPL_VAR NAME=DB_HOST>
  PerlSetVar db_username <TMPL_VAR NAME=DB_USERNAME>
  PerlSetVar db_passwd <TMPL_VAR NAME=DB_PASSWD>


  # mode => development, production, test
  PerlSetVar run_mode <TMPL_VAR NAME=RUN_MODE>

  SetHandler perl-script
  PerlHandler Kynetx::Logger
</LocationMatch>

</TMPL_IF>
<TMPL_IF NAME="GENDER_INIT">
<LocationMatch /js/>
  # Eventually this ought to come from the client configuration DB
  PerlSetVar kobj_js_version <TMPL_VAR NAME=JS_VERSION>

  # Where do I get the static JS files to serve?
  PerlSetVar kobj_js_root <TMPL_VAR NAME=KOBJ_ROOT>/etc/js

  # host names
  PerlSetVar init_host <TMPL_VAR NAME=INIT_HOST>
  PerlSetVar log_host <TMPL_VAR NAME=LOG_HOST>
  PerlSetVar action_host <TMPL_VAR NAME=ACTION_HOST>

  # mode => development, production, test
  PerlSetVar run_mode <TMPL_VAR NAME=RUN_MODE>

  SetHandler perl-script
  PerlHandler Kynetx::KOBJ
</LocationMatch>

</TMPL_IF>