{"global":[{"source":"http://fmm.kynetx.com/lookup/","cachable":{"value":"1","period":"seconds"},"name":"maps","datatype":"JSON","type":"datasource"},{"rhs":{"source":"page","args":[{"val":"caller","type":"str"}],"predicate":"env","type":"qualified"},"type":"expr","lhs":"fullurl"},{"rhs":{"source":"page","args":[{"val":"domain","type":"str"}],"predicate":"url","type":"qualified"},"type":"expr","lhs":"d"},{"rhs":{"source":"datasource","args":[{"source":"page","args":[{"val":"domain","type":"str"}],"predicate":"url","type":"qualified"}],"predicate":"maps","type":"qualified"},"type":"expr","lhs":"maps"},{"content":"\n    #KOBJDetailBox {\n      background-color: white;\n      padding: 4px;\n      color: black;\n    }\n  ","type":"css"}],"dispatch":[],"ruleset_name":"a8x42","rules":[{"blocktype":"every","emit":null,"pre":[{"rhs":"\n      <div id=\"KOBJDetailBox\">\n        <b>Maps<\/b><br/>\n      <\/div>\n    ","type":"here_doc","lhs":"detailbox"}],"name":"lookupmaps","callbacks":null,"state":"active","pagetype":{"foreach":[],"event_expr":{"vars":[],"pattern":".*","op":"pageview","type":"prim_event","legacy":1}},"cond":{"val":"true","type":"bool"},"actions":[{"action":{"source":null,"args":[{"val":"Maps for #{d}","type":"str"},{"val":"detailbox","type":"var"}],"name":"notify","modifiers":[{"name":"sticky","value":{"val":"true","type":"bool"}},{"name":"width","value":{"val":"500","type":"str"}}]}}]},{"blocktype":"every","emit":null,"pre":[{"rhs":{"args":[{"val":"$.regex","type":"str"}],"name":"pick","obj":{"val":"map","type":"var"},"type":"operator"},"type":"expr","lhs":"regexstring"}],"name":"listmaps","callbacks":null,"state":"active","pagetype":{"foreach":[{"var":["map"],"expr":{"val":"maps","type":"var"}}],"event_expr":{"vars":[],"pattern":".*","op":"pageview","type":"prim_event","legacy":1}},"cond":{"val":"true","type":"bool"},"actions":[{"action":{"source":null,"args":[{"val":"#KOBJDetailBox","type":"str"},{"val":"#{regexstring}<br/> ","type":"str"}],"name":"append","modifiers":null}}]},{"blocktype":"every","emit":null,"pre":[{"rhs":{"args":[{"val":"$.regex","type":"str"}],"name":"pick","obj":{"val":"map","type":"var"},"type":"operator"},"type":"expr","lhs":"regexstring"},{"rhs":{"val":"/","type":"str"},"type":"expr","lhs":"slash"},{"rhs":{"op":"+","args":[{"val":"/","type":"str"},{"op":"+","args":[{"args":[{"op":"+","args":[{"val":"/","type":"str"},{"op":"+","args":[{"val":"slash","type":"var"},{"val":"/g","type":"str"}],"type":"prim"}],"type":"prim"},{"val":"\\/","type":"str"}],"name":"replace","obj":{"val":"regexstring","type":"var"},"type":"operator"},{"val":"/","type":"str"}],"type":"prim"}],"type":"prim"},"type":"expr","lhs":"excp"},{"rhs":{"args":[{"val":"$.fields","type":"str"}],"name":"pick","obj":{"val":"map","type":"var"},"type":"operator"},"type":"expr","lhs":"fields"}],"name":"showmatchingmap","callbacks":null,"state":"active","pagetype":{"foreach":[{"var":["map"],"expr":{"val":"maps","type":"var"}}],"event_expr":{"vars":[],"pattern":".*","op":"pageview","type":"prim_event","legacy":1}},"cond":{"args":[{"args":[{"val":"regexp","type":"str"}],"name":"as","obj":{"val":"excp","type":"var"},"type":"operator"}],"name":"match","obj":{"val":"fullurl","type":"var"},"type":"operator"},"actions":[{"emit":"\n        fieldstring = $K.compactJSON(fields);\n      "},{"action":{"source":null,"args":[{"val":"#KOBJDetailBox","type":"str"},{"val":"<br/><b>Map Found<\/b><br/>URL: #{regexstring}<br/>#{fieldstring}<br/> ","type":"str"}],"name":"append","modifiers":null}}]}],"meta":{"author":"Sam Curren","description":" \n    Shows maps that exist for the current domain \n  ","name":"FormFill Inspector","logging":"on"}}
