{"global":[{"content":"#spotlight-reminders-wrapper{    \theight:24px;    \tbackground:#e4effd;    \tpadding:0 0 0 9px;    \tmargin:12px 0;    \tfont-size:small;    }        p.descriptive-text{    \tfloat:right;    \tmargin:4px 9px 0 0;    \tpadding:0;    \tcolor:#7a7a7a;    \tfont-size:small;    }            ul.spotlightReminders{    \tfloat:left;    \tmargin:0;    \tpadding:0;    \tlist-style:none;    \theight:24px;    }        ul.spotlightReminders li{    \tdisplay:block;    \tfloat:left;    \tmargin:3px 3px 0 0;    }        ul.spotlightReminders li.azigo-logo{    \tmargin:4px 0 0 0;    }        ul.spotlightReminders li.txt-reminder{    \tpadding:0 0 0 4px;    \tmargin:4px 3px 0 0;    \tcolor:#2b30d1;    }        .clear{    \tclear:both;    }               .flyout-wrapper{    \tborder: 3px solid #e471ac;    \twidth:450px;    \tmargin:-12px 0 0 29px;    \tposition: absolute;            background-color: white;    \tdisplay: none;    \tz-index: 1;    }        .flyout-pointer{    \tbackground:url(\"http://www.azigo.com/images/rm/FlyoutPoint.png\") no-repeat;    \theight:11px;    \twidth:15px;    \tposition:absolute;    \tmargin:-11px 0 0 34px;    }        .flyout-reminder-details{    \tpadding:8px 10px;    \tborder-bottom:1px solid #c2c2c2;    }        p.flyout-reminder-url{    \tmargin:0 0 5px 0;    \tpadding:0;    }        .flyout-reminder-details ul{    \tmargin:0;    \tpadding:0;    \tlist-style:none;    \tline-height:14px;    }        .flyout-reminder-details ul li{    \tdisplay:block;    \tfloat:left;    \tmargin:0 4px 0 0;    \tpadding:0;    }        .flyout-reminder-details ul li.flyout-reminder-text{    \twidth:230px;    }        .flyout-reminder-details ul li.flyout-reminder-button{    \tmargin:0;    }        a.flyout-reminder-button{    \tdisplay:block;    \tfont-size:10px;    \tfont-weight:bold;    \tfont-family:Verdana, sans-serif, Arial, Helvetica;    \tbackground:#57b6e3;    \ttext-align:center;    \ttext-decoration:none;    \theight:16px;    \twidth:96px;    \tcolor:#fff;    \tpadding:2px 0 0 0;    \tmargin:0;    }            .clearfix:after {        content: \".\";        display: block;        clear: both;        visibility: hidden;        line-height: 0;        height: 0;    }        .clearfix {          }        html[xmlns] .clearfix {        display: block;    }        * html .clearfix {        height: 1%;    }     ","type":"css"},{"emit":"KOBJ.spotlight = function (source, logo, flyoutLogo) {        function datasetcallback(d){            if(d) {               var response = d.response;               if(response) {                   if(response.docs.length > 0) {                   \t    displaySpotlight(response);                   }               }            }      \t        }            var q = String(top.location).replace(/^.*[\\?&][qp]=([^&]+).*$/, \"$1\");        var remoteUrl = \"http://service.azigo.com/solr/nutchfilter.jsp?q=\"+q+\"&fq=source:\"+source+\"&callback=?\";        $K.getJSON(remoteUrl,datasetcallback);            function createSpotlightMainDiv()        {    \t var spotlightMainDiv = $K(\"<div></div>\");    \t spotlightMainDiv.attr(\"id\", \"spotlight-reminders-wrapper\");                 var spotlightMainUl = $K(\"<ul></ul>\");             spotlightMainUl.attr({\"id\":\"spotlightReminders\", \"class\":\"spotlightReminders\"});                 spotlightMainUl.append(                        makeListItem(null, null, $K(\"<img src='http://www.azigo.com/images/rm/azigo_16x16.png' />\"))             );                 var spotlightReminderNSpan = $K(\"<span></span>\");             spotlightReminderNSpan.attr(\"id\", \"spanNReminders\");             spotlightReminderNSpan.text(\"0\");                 var spotlightReminderTextSpan = $K(\"<span></span>\");             spotlightReminderTextSpan.attr(\"id\", \"spanTextReminders\");             spotlightReminderTextSpan.text(\"Reminders\");                 spotlightMainUl.append(                               makeListItem(    \t\t\t\t\"spotlight-txt-reminder\",     \t\t\t\t\"txt-reminder\",     \t\t\t\t\"<span id='spanNReminders'>0</span> <span id='spanTextReminders'>Reminders</span>\"    \t\t\t   )             );                 spotlightMainUl.append(                        makeListItem(null, null, $K(\"<img src='http://www.azigo.com/images/rm/FlyoutIndicator.png' />\"))             );                 var spotlightMainP = $K(\"<p></p>\");             spotlightMainP.attr(\"class\", \"descriptive-text\");             spotlightMainP.text(\"Top Reminder Results\");                 spotlightMainDiv.append(spotlightMainUl);             spotlightMainDiv.append(spotlightMainP);                 return spotlightMainDiv;        }            function createSpotlightFlyoutDiv()        {    \tvar spotlightFlyoutDiv = $K(\"<div></div>\");    \tspotlightFlyoutDiv.attr({\"id\":\"spotlightFlyoutDiv\", \"class\":\"flyout-wrapper\"});    \tspotlightFlyoutDiv.append($K(\"<div></div>\").attr(\"class\", \"flyout-pointer\"));            return spotlightFlyoutDiv;        }            function flyoutContentCallback(data)        {            if($K('#spotlightFlyoutDiv').length) {               $K.each(data, function(){                            $K('#spotlightFlyoutDiv').append(    \t\t\t                  getSpotlightFlyoutDetails(                                                     this.link,                                                      flyoutLogo,                                                      this.text,                                                      this.icon                                              )                            );                        }               );            }        }            function getSpotlightFlyoutDetails(clientUrl, clientLogo, displayText, buttonType)        { \t             \tvar flyoutDetailsDiv = $K(\"<div></div>\");    \tflyoutDetailsDiv.attr(\"class\",\"flyout-reminder-details clearfix\");                var flyoutDetailsP = $K(\"<p></p>\");            flyoutDetailsP.attr(\"class\",\"flyout-reminder-url\");            flyoutDetailsP.append(makeAnchorTag(clientUrl, null, clientUrl));                        var flyoutDetailsUl = $K(\"<ul></ul>\");            flyoutDetailsUl.append(    \t\tmakeListItem(null, null, $K(\"<img src='http://www.azigo.com/images/rm/crd/\"+clientLogo+\"' />\"))    \t);            flyoutDetailsUl.append(    \t\tmakeListItem(null, \"flyout-reminder-text\", displayText)    \t);    \tvar discountButton = \"\";    \tif(buttonType === \"discount\") {    \t\tdiscountButton = makeAnchorTag(clientUrl, \"flyout-reminder-button\", \"Get Discount...\");    \t}            flyoutDetailsUl.append(    \t\tmakeListItem(null, null, discountButton)    \t);                               flyoutDetailsDiv.append(flyoutDetailsP);            flyoutDetailsDiv.append(flyoutDetailsUl);                    \treturn flyoutDetailsDiv;        }            function makeListItem(listItemId, listItemClass, listItemContent)        {            var listItem = $K(\"<li></li>\");            if(listItemClass != null) {                listItem.attr(\"class\", listItemClass);            }    \tif(listItemId != null) {    \t    listItem.attr(\"id\", listItemId);    \t}            listItem.append(listItemContent);            return listItem;                }            function makeAnchorTag(aUrl, aClass, aText)        {           var anchorTag = $K(\"<a></a>\");           anchorTag.attr(\"href\", aUrl);           if(aClass != null) {              anchorTag.attr(\"class\", aClass);           }           anchorTag.append(aText);           return anchorTag;        }            function displaySpotlight(response)        {            var logoUrl = \"http://www.azigo.com/images/rm/crd/\"+logo;                if($K(\"#spotlight-reminders-wrapper\").length == 0) {    \t    var spotlightMainDiv = createSpotlightMainDiv();                var spotlightFlyoutDiv = createSpotlightFlyoutDiv();     \t    var spotlightDiv = $K(\"<div></div>\");    \t    spotlightDiv.append(spotlightMainDiv);    \t    spotlightDiv.append(spotlightFlyoutDiv);                if($K(\"#res\").length) {                    $K(\"#res\").before(spotlightDiv);                }                else if($K(\"#results\").length) {                    $K(\"#results\").before(spotlightDiv);                }                else if($K(\"#web\").length) {                    $K(\"#web\").before(spotlightDiv);                }            }           \t$K(\"#spotlightReminders\").mouseover(function ()             {    \t\t $K('#spotlightReminders').css({'cursor':'hand','cursor':'pointer'});                     $K('div#spotlightFlyoutDiv').show();            });        \t$K(\"#spotlightReminders\").mouseout(function ()             {    \t\t $K('div#spotlightFlyoutDiv').hide();            });        \t$K(\"#spotlightFlyoutDiv\").mouseover(function ()             {                     $K('div#spotlightFlyoutDiv').show();            });        \t$K(\"#spotlightFlyoutDiv\").mouseout(function ()             {    \t\t $K('div#spotlightFlyoutDiv').hide();            });                if($K(\"#spotlight-txt-reminder\").length) {                 $K(\"#spotlight-txt-reminder\").after(\"<li><img src='\"+logoUrl+\"' /></li>\");            }            var spanReminders = $K(\"#spanNReminders\");            if (spanReminders.length > 0)            {                var totalReminders = parseInt(spanReminders.text());               if (!isNaN(totalReminders))               {    \t       if(response.docs.length > 3) {    \t\t   totalReminders = totalReminders + 3;    \t       }    \t       else {                   \t   totalReminders = totalReminders + response.docs.length;    \t       }                   spanReminders.text(String(totalReminders));    \t       if(totalReminders == 1) {    \t\t   $K(\"#spanTextReminders\").text(\"Reminder\");    \t       }    \t       else {    \t\t   $K(\"#spanTextReminders\").text(\"Reminders\");    \t       }               }            }              \tvar jsonData = \"\";    \tvar index = 1;    \t$K.each(response.docs, function(){    \t\t\t\tif(index > 1)    \t\t\t\t    jsonData += \",\";    \t\t\t\tjsonData += \"'KOBJL\"+index+\"':{'url':'\"+this.url+\"'}\";    \t\t\t\tindex++;    \t\t\t\tif(index > 3)    \t\t\t\t   return false;    \t\t\t});    \t          var jsonUrl = \"https://service.azigo.com/remindmeac/fetch?callback=?&jsonData=true&source=\"+source;            $K.getJSON(jsonUrl, \"annotatedata={\"+jsonData+\"}\", flyoutContentCallback);                          }    };                "}],"global_start_line":14,"dispatch":[{"domain":"www.google.com","ruleset_id":null},{"domain":"search.yahoo.com","ruleset_id":null},{"domain":"www.bing.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"args":[],"function_expr":{"val":"truth","type":"var"},"type":"app"},"blocktype":"every","actions":[{"label":null,"emit":"KOBJ.spotlight('wbur', 'wbur_18x24.png', 'wbur_60x90.png');                    "}],"post":null,"pre":[],"name":"wbur_spotlight","start_col":5,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"^http://www.google.com|^http://search.yahoo.com|^http://www.bing.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":19}],"meta_start_col":5,"meta":{"logging":"off","name":"SpotlightWbur","meta_start_line":2,"description":"Spotlight for Wbur   \n","meta_start_col":5},"dispatch_start_line":9,"global_start_col":5,"ruleset_name":"a325x8"}
