{"global":[{"source":"http://pipes.yahoo.com/tiegz/this_just_in?_render=json","name":"my_pipe","type":"datasource","datatype":"JSON","cachable":0},{"source":"http://wherewedowhatwedo.com?foo=bar","name":"test_pipe","type":"datasource","datatype":"JSON","cachable":0}],"global_start_line":31,"dispatch":[{"domain":"online.wsj.com","ruleset_id":null},{"domain":"topics.wsj.com","ruleset_id":null},{"domain":"www.cnn.com","ruleset_id":null},{"domain":"money.cnn.com","ruleset_id":null},{"domain":"news.blogs.cnn.com","ruleset_id":null},{"domain":"www.latimes.com","ruleset_id":null},{"domain":"www.reuters.com","ruleset_id":null},{"domain":"www.nytimes.com","ruleset_id":null},{"domain":"www.foxnews.com","ruleset_id":null},{"domain":"video.foxnews.com","ruleset_id":null},{"domain":"news.yahoo.com","ruleset_id":null},{"domain":"www.huffingtonpost.com","ruleset_id":null},{"domain":"www.msnbc.msn.com","ruleset_id":null},{"domain":"www.dailykos.com","ruleset_id":null},{"domain":"news.yahoo.com","ruleset_id":null},{"domain":"content.usatoday.com","ruleset_id":null},{"domain":"www.usatoday.com","ruleset_id":null},{"domain":"www.bloomberg.com","ruleset_id":null},{"domain":"bloomberg.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"","type":"str"},{"val":"str","type":"var"}],"modifiers":[{"value":{"val":"#E1E1E1","type":"str"},"name":"background_color"},{"value":{"val":"#333","type":"str"},"name":"color"},{"value":{"val":500,"type":"num"},"name":"width"},{"value":{"val":"true","type":"bool"},"name":"sticky"},{"value":{"val":1,"type":"num"},"name":"opacity"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"page","predicate":"env","args":[{"val":"title","type":"str"}],"type":"qualified"},"lhs":"title","type":"expr"},{"rhs":{"source":"datasource","predicate":"my_pipe","args":[{"args":[{"val":"&q=","type":"str"},{"val":"title","type":"var"}],"type":"prim","op":"+"}],"type":"qualified"},"lhs":"my_pipe_articles","type":"expr"}],"name":"news_page","start_col":5,"emit":"var items = my_pipe_articles['value']['items'];    var str = '<a target=\"_blank\" style=\"text-decoration: underline; font-weight: bold; font-family: HelveticaNeue-Light, Helvetica, Arial, sans-serif; letter-spacing:-1px; color:#001;font-size:16px;\" href=\"http://different-take.com\">Different Take</a>';        document.charset = 'UTF-8';    document.defaultCharset = 'UTF-8';        str +=  ': <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"table-layout:fixed; width: 100%; max-height:300px; overflow:auto;list-style:disc;margin:5px;padding:5px;background:#332;-webkit-border-radius:5px;-mox-border-radius:5px;border-radius:5px;font-family: HelveticaNeue-Light, Helvetica, Arial, sans-serif; letter-spacing:1px; \">';        if(items.length == 0) { str +=  '<tr><td style=\"list-style:none;color:#CCC;font-size:14px;\">No similar stories found...</td></tr>'; }         for(var i = 0; i < items.length; i++) {      var title = items[i]['title'];      var link = items[i]['link'];      if(link.match(\"yahoo.com.*\\\\*\")) { try { link = unescape(link.split('*')[1]); } catch(err) { console.log(err); } }       if(link.match(\"news.google.com/news\")) { try { link = unescape(link.split('url=')[1].split('&')[0]); } catch(err) { console.log(err); } }          if (link.split('?')[0] != window.location.href.split('?')[0]) {        var source = \"\";            var matches = title.match(/(\\(|\\{|\\[)([^({\\[\\]})]*)(\\)|\\{|\\[)$/m);        if (matches == null || matches.length < 3) { source = link.replace(\"http://\",'').replace(/www\\.|online\\.|\\.com|\\.org|\\.net/g, '').split('/')[0]; }        else { source = matches[2]; }        title = title.replace(/(\\(|\\{|\\[)([^({\\[\\]})]*)(\\)|\\{|\\[)$/m, \"\");            str += '<tr>';        str += '<td style=\"overflow:hidden; white-space:nowrap; text-overflow:ellipsis;vertical-align:top;color:#CCC;overflow:hidden;\"><span style=\"color:lemonchiffon;font-size:10px;font-weight:bold;text-transform:uppercase;\">' + source + '</span>: ';        str += '<a style=\"text-decoration:underline;color:#CCC;font-size:13px;\" href=\"' + link + '\">' + title + '</a></td>';        str += '</tr>';          }    }        str = str + \"</table>\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"/(\\d\\d\\d\\d|id|apps|huff-tv|article|politics|storyonly|subject|public|story|business|sports|entertainment|features|travel|technology|s|news|communities|v)/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":35},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":null,"name":"fix_notify_zindex","start_col":5,"emit":"$$(\"#kGrowl\")[0].style.zIndex = '2147483647';          ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"/(\\d\\d\\d\\d|id|article|storyonly|s|news)/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":52},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"DIFFERENT TAKE â : ","type":"str"},{"val":"str","type":"var"}],"modifiers":[{"value":{"val":"#E1E1E1","type":"str"},"name":"background_color"},{"value":{"val":"#333","type":"str"},"name":"color"},{"value":{"val":500,"type":"num"},"name":"width"},{"value":{"val":"true","type":"bool"},"name":"sticky"},{"value":{"val":1,"type":"num"},"name":"opacity"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"page","predicate":"env","args":[{"val":"title","type":"str"}],"type":"qualified"},"lhs":"title","type":"expr"},{"rhs":{"source":"datasource","predicate":"my_pipe","args":[{"args":[{"val":"&q=","type":"str"},{"val":"title","type":"var"}],"type":"prim","op":"+"}],"type":"qualified"},"lhs":"my_pipe_articles","type":"expr"}],"name":"test","start_col":5,"emit":"jQuery.ajaxSetup({'beforeSend': function(xhr) {xhr.setRequestHeader(\"Content-Type\", \"text/javascript; charset=utf-8\"); } });  document.charset = 'utf-8';  document.defaultCharset = 'utf-8';  alert('2nd rule ' + document.charset);  var items = my_pipe_articles['value']['items'];  var str = '<ul style=\"max-height:400px;overflow:auto;list-style:disc;padding:5px;background:#332;-webkit-border-radius:5px;-mox-border-radius:5px;border-radius:5px;font-family: HelveticaNeue-Light, Helvetica, Arial, sans-serif; position:relative;z-index:2147483649;height:110px;overflow:auto;\">';  for(var i = 0; i < items.length; i++) {          var title = items[i]['title'];   str = str + '<li style=\"color:#CCC;font-size:1.1em;\">&bull; â<a style=\"text-decoration:underline;color:#CCC;\" href=\"' + items[i]['link'] + '\">' + title + '</a></li>';    }  str = str + \"</ul>\";          ","state":"inactive","callbacks":null,"pagetype":{"event_expr":{"pattern":"/(\\d\\d\\d\\d|id|article|storyonly|s|news)/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":59}],"meta_start_col":5,"meta":{"logging":"on","name":"Different Take","meta_start_line":2,"author":"tiegz","description":"Reading the news? See how other news sources reported the same story... currently works on CNN, NYTimes, WSJ, Reuters, Yahoo! News, Daily Kos & FOX News.    \n","meta_start_col":5},"dispatch_start_line":10,"global_start_col":5,"ruleset_name":"a218x3"}
