{"global":[],"global_start_line":null,"dispatch":[],"dispatch_start_col":null,"meta_start_line":null,"rules":[{"cond":{"args":[],"function_expr":{"val":"daytime","type":"var"},"type":"app"},"blocktype":"every","actions":[{"action":{"source":"my_label","name":"replace_html","args":[{"val":"#kobj_13_1","type":"str"},{"val":"announcement_1","type":"var"}],"modifiers":[{"value":{"val":[{"val":"gift certificate","type":"str"},{"val":"yellow","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"referer","predicate":"search_terms","args":[],"type":"qualified"},"lhs":"keywords","type":"expr"},{"rhs":"<div id=\"kobj_announcement_1\">\n<p class=\"announcement\">\nThis is some text!!! It's cool.  You searched on <strong>#{keywords}</strong> \n</p>\n</div> \n      ","lhs":"announcement_1","type":"here_doc"}],"name":"test_tags","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"public_service_tips","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":6},{"cond":{"args":[{"val":"www.windley.com","type":"str"}],"function_expr":{"val":"referer_domain","type":"var"},"type":"app"},"blocktype":"choose","actions":[{"action":{"source":"first_action_name","name":"replace_html","args":[{"val":"#kobj_13_1","type":"str"},{"val":"announcement_1","type":"var"}],"modifiers":[{"value":{"val":[{"val":"gift certificate","type":"str"},{"val":"yellow","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null},{"action":{"source":"second_action_name","name":"replace_html","args":[{"val":"#kobj_13_1","type":"str"},{"val":"announcement_2","type":"var"}],"modifiers":[{"value":{"val":[{"val":"discount","type":"str"},{"val":"blue","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null},{"action":{"source":"third_rule_name","name":"replace_html","args":[{"val":"#kobj_13_1","type":"str"},{"val":"announcement_3","type":"var"}],"modifiers":[{"value":{"val":[{"val":"discount","type":"str"},{"val":"red","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":"<div id=\"kobj_announcement_1\">\n<p class=\"announcement\">\nThis is the first <span id=\"rssfeed\">choice</span>\n</p>\n</div> \n      ","lhs":"announcement_1","type":"here_doc"},{"rhs":"<div id=\"kobj_announcement_1\">\n<p class=\"announcement\">\nThis is the second <span id=\"rssfeed\">choice</span>\n</p>\n</div> \n      ","lhs":"announcement_2","type":"here_doc"},{"rhs":"<div id=\"kobj_announcement_1\">\n<p class=\"announcement\">\nThis is the third <span id=\"rssfeed\">choice</span>\n</p>\n</div> \n      ","lhs":"announcement_3","type":"here_doc"}],"name":"test_choose","start_col":3,"emit":null,"state":"active","callbacks":{"success":[{"attribute":"id","trigger":null,"value":"rssfeed","type":"click"}],"failure":[{"attribute":"id","trigger":null,"value":"close_rss","type":"click"}]},"pagetype":{"event_expr":{"pattern":"apache_setup","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":34},{"cond":{"args":[],"function_expr":{"val":"daytime","type":"var"},"type":"app"},"blocktype":"every","actions":[{"action":{"source":"first_rule_name","name":"replace_html","args":[{"val":"#kobj_13_1","type":"str"},{"val":"announcement_1","type":"var"}],"modifiers":[{"value":{"val":[{"val":"gift certificate","type":"str"},{"val":"yellow","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null},{"action":{"source":"second_rule_name","name":"replace_html","args":[{"val":"#kobj_13_2","type":"str"},{"val":"announcement_2","type":"var"}],"modifiers":[{"value":{"val":[{"val":"discount","type":"str"},{"val":"blue","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":"<div id=\"kobj_announcement_1\">\n<p class=\"announcement\">\nThis is some text!!! It's cool.  As nifty as âinvokeâ is, it has at least one significant drawback: every time you invoke a command, it has to reestablish connections to the servers. This isnât a big deal at all if youâre only executing a single command, but if you have two or three that you want to run, it can quickly get annoying, having to wait for the connections to be made.\n\nEnter âcap shellâ. This gives you an interactive prompt from which you can enter adhoc commands and even execute tasks, and all connections that are established during the duration of the shell session are cached and reused. That means that if you execute a command and it has to connect to three different servers, the next time you execute a command that needs to connect to those same servers, the connections are reused. Really slick! Itâs a really handy tool for all kinds of system administration tasks.\n\nJust as with the âinvokeâ task, the âshellâ task lets you scope commands and tasks by host or role. You can type âhelpâ from within the shell at any time, to get more information.\nNamespaces\n\nAlright, back to our regularly scheduled tutorialâ¦ Oh, yes. We had just talked about how many tasks we were accumulating. Documenting them was a good first step, but as you get more and more tasks, you begin to wish for a way to group your tasks by functionality.\n</p>\n</div> \n      ","lhs":"announcement_1","type":"here_doc"},{"rhs":"<div id=\"kobj_announcement_2\">\n<p class=\"announcement\">\nThis is more text!!! Two things is cool!\n</p>\n</div> \n      ","lhs":"announcement_2","type":"here_doc"}],"name":"test_every","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"configure_linux","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":96},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":"an_alert","name":"alert","args":[{"val":"This is just a test!","type":"str"}],"modifiers":[{"value":{"val":[{"val":"black","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null}],"post":null,"pre":[],"name":"test_alert","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"configure_linux","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":142},{"cond":{"args":[{"args":[],"function_expr":{"val":"daytime","type":"var"},"type":"app"},{"args":[],"function_expr":{"val":"nighttime","type":"var"},"type":"app"}],"type":"pred","op":"&&"},"blocktype":"every","actions":[{"action":{"source":"no_fire_label","name":"alert","args":[{"val":"This is just a test!","type":"str"}],"modifiers":[{"value":{"val":[{"val":"this","type":"str"},{"val":"should","type":"str"},{"val":"not","type":"str"},{"val":"show","type":"str"}],"type":"array"},"name":"tags"}],"vars":null},"label":null}],"post":null,"pre":[],"name":"rule_no_fire","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"configure_linux","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":155},{"cond":{"args":[],"function_expr":{"val":"daytime","type":"var"},"type":"app"},"blocktype":"every","actions":[{"action":{"source":null,"name":"float","args":[{"val":"absolute","type":"str"},{"val":"top: 10px","type":"str"},{"val":"right: 10px","type":"str"},{"args":[{"val":"http://frag.kobj.net/widgets/weather.pl?zip=","type":"str"},{"val":"zip","type":"var"}],"type":"prim","op":"+"}],"modifiers":[{"value":{"val":0,"type":"num"},"name":"delay"},{"value":{"val":"true","type":"bool"},"name":"draggable"},{"value":{"val":"true","type":"bool"},"name":"scrollable"},{"value":{"val":"appear","type":"str"},"name":"effect"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"geoip","predicate":"postal_code","args":[],"type":"qualified"},"lhs":"zip","type":"expr"}],"name":"weather_widget","start_col":2,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"/archives/(\\d+)/(\\d+)/","legacy":1,"type":"prim_event","vars":["year","month"],"op":"pageview"},"foreach":[]},"start_line":173}],"meta_start_col":null,"meta":{},"dispatch_start_line":null,"global_start_col":null,"ruleset_name":"13"}
