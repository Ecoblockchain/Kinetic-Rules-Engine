{"global":[{"source":"http://backtweets.com/search.json?key=23783944b830fb6986bc&q=","name":"searchBackTweets","type":"datasource","datatype":"JSON","cachable":{"period":"minutes","value":"5"}},{"content":".kGrowl-notification a { color: #0099CC; }    \t    \t.kGrowl-notification { color: #737373; }    \t    \t.KOBJ_tweetItems { margin: 10px; border-bottom: 1px dashed #D2DADA; padding-bottom: 10px; }        \t#KOBJ_tweetList { list-style-position:outside; margin: 0; padding: 0; list-style-type: none; list-style-image: none; }        \t.KOBJ_tweetDiv { height: 300px; overflow-x: auto; overflow-y: auto; background-color: #222; opacity: 0.8; }    \t    \t.KOBJ_tweetDiv p { background: none; color: #FFFFFF; font-family:arial,sans-serif; font-size: 9pt; }    \t    \t.KOBJ_tweetDiv a { color: #0099CC; }        \t.KOBJ_tweetDiv li { list-style-position; list-style-type: none; padding-left: none }        \t#KOBJ_tweetLogo { background-image: url(\"http:\\/\\/frag.kobj.net/kntx/images/header_sweetter.jpg\"); height: 102px; display: block; margin-bottom: 10px; }    \t    \t.KOBJ_tweetedImage { float: left; margin-right: 10px; margin-top: 5px; }        \t.KOBJ_tweetedUser {  }    \t    \t.KOBJ_tweetedTweet {  }        ","type":"css"}],"global_start_line":12,"dispatch":[{"domain":"apple.com","ruleset_id":null},{"domain":"ebay.com","ruleset_id":null},{"domain":"www.apple.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"image","type":"var"},{"val":"message","type":"var"}],"modifiers":[{"value":{"val":"true","type":"bool"},"name":"sticky"},{"value":{"val":"300px","type":"str"},"name":"width"},{"value":{"val":".98","type":"str"},"name":"opacity"}]},"label":null},{"label":null,"emit":"setTimeout(function() {    \tvar tweets = $K(tweetTexts);  \tvar users = $K(tweetUsers);  \tvar images = $K(tweetImages);  \tvar DateObject = new Date();  \tvar epochNow = DateObject.getTime()/1000.0;    \tvar offset = DateObject.getTimezoneOffset() * 60;    \tif(results !== 0 && results != 1 && results != 2) {  \t\t$K(tweets).each(function(i) {    \t\t\tvar timeTest = tweetTimes[i].replace(/-/,\"/\").replace(/-/,\"/\");  \t\t\tvar testDate = new Date(timeTest);  \t\t\tvar dateEpoch = testDate.getTime()/1000.0;  \t\t\tdateEpoch -= offset;  \t\t\ttestEpoch = (epochNow - dateEpoch)|0;  \t\t\t  \t\t\tvar weeks = (testEpoch / 604800)|0;  \t\t\ttestEpoch -= weeks * 604800;  \t\t\t  \t\t\tvar days = (testEpoch / 86400)|0;  \t\t\ttestEpoch -= days * 86400;  \t\t\t  \t\t\tvar hours = (testEpoch / 3600)|0;  \t\t\ttestEpoch -= hours * 3600;  \t\t\t  \t\t\tvar minutes = (testEpoch / 60)|0;  \t\t\ttestEpoch -= minutes * 60;  \t\t\t  \t\t\tvar timeOutput = \"\";\t\t\t    \t\t\tif(weeks > 3) {  \t\t\t\t  \t\t\t\ttimeOutput = \"a long time ago.\";  \t\t\t\t  \t\t\t}  \t\t\tif(weeks == 0 && days == 0 && hours == 0 && minutes == 0) {  \t\t\t\ttimeOutput = \"moments ago.\";  \t\t\t}  \t\t\tif(weeks == 0 && !(weeks > 3) ) {  \t\t\t\tif(days == 0) {\t  \t\t\t\t\tif(hours == 0) {  \t\t\t\t\t\ttimeOutput = minutes + ' minutes ago.';  \t\t\t\t\t} else {  \t\t\t\t\t\ttimeOutput = hours + ' hours ago.';  \t\t\t\t\t}  \t\t\t\t} else {  \t\t\t\t\ttimeOutput = days + ' days ago.';  \t\t\t\t}  \t\t\t} else {  \t\t\t\ttimeOutput = weeks + ' weeks ago.';  \t\t\t}  \t\t\t  \t\t\tvar tweet = this;  \t\t        $K(\"#KOBJ_tweetList\").append('<li class=\"KOBJ_tweetItems\"><p><span class=\"KOBJ_tweetedImage\"><a href=\"http://www.twitter.com/'+users[i]+'\"><img width=\"48px\" height=\"48px\" border=\"none\" src=\"'+images[i]+'\" /></a></span><span class=\"KOBJ_tweetedUser\"><a href=\"http://www.twitter.com/'+users[i]+'\">'+users[i]+'</a></span></p><span class=\"KOBJ_tweetedTweet\"><p>'+tweet+'</p><p style=\"font-size:8pt;  font-style:italic; margin-top:5px;\">This was Tweeted '+timeOutput+'</p></span></li>');  \t\t\tif(i > 9) {  \t\t\t\treturn false;  \t\t\t}  \t\t});  \t} else if(results == 1) {  \t  \t  \t\tvar timeTest = tweetTimes.replace(/-/,\"/\").replace(/-/,\"/\");  \t\tvar testDate = new Date(timeTest);  \t\tvar dateEpoch = testDate.getTime()/1000.0;  \t\tdateEpoch -= offset;  \t\ttestEpoch = (epochNow - dateEpoch)|0;  \t\t  \t\tvar weeks = (testEpoch / 604800)|0;  \t\ttestEpoch -= weeks * 604800;  \t\t  \t\tvar days = (testEpoch / 86400)|0;  \t\ttestEpoch -= days * 86400;  \t\t  \t\tvar hours = (testEpoch / 3600)|0;  \t\ttestEpoch -= hours * 3600;  \t\t  \t\tvar minutes = (testEpoch / 60)|0;  \t\ttestEpoch -= minutes * 60;  \t\t  \t\tif(weeks > 3) {  \t\t\t  \t\t\tvar timeOutput = \"a long time ago.\";  \t\t\t  \t\t}  \t\tif(weeks == 0 && days == 0 && hours == 0 && minutes == 0) {  \t\t\tvar timeOutput = \"moments ago.\";  \t\t}  \t\tif(weeks == 0 && !(weeks > 3) ) {  \t\t\tif(days == 0) {\t  \t\t\t\tif(hours == 0) {  \t\t\t\t\ttimeOutput = minutes + ' minutes ago.';  \t\t\t\t} else {  \t\t\t\t\ttimeOutput = hours + ' hours ago.';  \t\t\t\t}  \t\t\t} else {  \t\t\t\ttimeOutput = days + ' days ago.';  \t\t\t}  \t\t} else {  \t\t\ttimeOutput = weeks + ' weeks ago.';  \t\t}  \t\t$K(\"#KOBJ_tweetList\").append('<li class=\"KOBJ_tweetItems\"><p><span class=\"KOBJ_tweetedImage\"><a href=\"http://www.twitter.com/'+tweetUsers+'\"><img width=\"48px\" height=\"48px\" border=\"none\" src=\"'+tweetImages+'\" /></a></span><span class=\"KOBJ_tweetedUser\"><a href=\"http://www.twitter.com/'+users+'\">'+tweetUsers+'</a></span><span class=\"KOBJ_tweetedTweet\"><p>'+tweetTexts+'</p></span></p></li>');  \t\t$K(\".KOBJ_tweetDiv\").css(\"height\",\"130px\");  \t} else if(results == 2 ) {  \t\t$K(\".KOBJ_tweetDiv\").css(\"height\",\"250px\");  \t} else {  \t\t$K(\"#KOBJ_tweetList\").append('<li class=\"KOBJ_tweetItems\"><p>I\\'m sorry, but there were no Tweets about this domain</p>');  \t\t$K(\".KOBJ_tweetDiv\").css(\"height\",\"90px\");  \t}  \t\t\t  \t  \t$K(\"#KOBJ_tweetLoading\").slideUp(\"slow\");  \t$K(\".KOBJ_tweetDiv\").slideDown(\"slow\");  \t$K(\".KOBJ_tweetDiv\").css(\"background-color\",\"#222222\");  \t$K(\".close\").css(\"font-size\", \"22px\");  \t$K(\".close\").css(\"margin-right\",\"5px\");  \t$K(\".close\").css(\"margin-top\",\"2px\");    \t},1000);                    "}],"post":null,"pre":[{"rhs":{"source":"page","predicate":"env","args":[{"val":"caller","type":"str"}],"type":"qualified"},"lhs":"url","type":"expr"},{"rhs":{"obj":{"val":"url","type":"var"},"args":[{"val":"/http:\\/\\/([A-Za-z0-9.-]+)\\/.*/","type":"regexp"},{"val":"$1","type":"str"}],"name":"replace","type":"operator"},"lhs":"domain","type":"expr"},{"rhs":{"source":"datasource","predicate":"searchBackTweets","args":[{"val":"domain","type":"var"}],"type":"qualified"},"lhs":"backTweetsData","type":"expr"},{"rhs":{"obj":{"val":"backTweetsData","type":"var"},"args":[{"val":"$..totalresults","type":"str"}],"name":"pick","type":"operator"},"lhs":"results","type":"expr"},{"rhs":{"obj":{"val":"backTweetsData","type":"var"},"args":[{"val":"$..tweets","type":"str"}],"name":"pick","type":"operator"},"lhs":"tweetsData","type":"expr"},{"rhs":{"obj":{"val":"tweetsData","type":"var"},"args":[{"val":"$..tweet_id","type":"str"}],"name":"pick","type":"operator"},"lhs":"tweetIds","type":"expr"},{"rhs":{"obj":{"val":"tweetsData","type":"var"},"args":[{"val":"$..tweet_profile_image_url","type":"str"}],"name":"pick","type":"operator"},"lhs":"tweetImages","type":"expr"},{"rhs":{"obj":{"val":"tweetsData","type":"var"},"args":[{"val":"$..tweet_from_user","type":"str"}],"name":"pick","type":"operator"},"lhs":"tweetUsers","type":"expr"},{"rhs":{"obj":{"val":"tweetsData","type":"var"},"args":[{"val":"$..tweet_text","type":"str"}],"name":"pick","type":"operator"},"lhs":"tweetTexts","type":"expr"},{"rhs":{"obj":{"val":"tweetsData","type":"var"},"args":[{"val":"$..tweet_created_at","type":"str"}],"name":"pick","type":"operator"},"lhs":"tweetTimes","type":"expr"},{"rhs":"<a href=\"http://www.kynetx.com\"><span id=\"KOBJ_tweetLogo\"/></a>  \t\n ","lhs":"image","type":"here_doc"},{"rhs":"<div id=\"KOBJ_tweetLoading\" style=\"text-align: center;\">  \t\t\t<img src=\"http:\\/\\/frag.kobj.net/kntx/images/loading.gif\" alt=\"Loading...\" style=\"margin: 0 auto; \"/>  \t\t</div>  \t\t<div class=\"KOBJ_tweetDiv\" style=\"display: none; background-color: #222222;\">  \t\t\t<ul id=\"KOBJ_tweetList\" style=\"background-color: #222222;\">  \t\t\t</ul>  \t\t</div>  \t\t\n ","lhs":"message","type":"here_doc"}],"name":"backtweets","start_col":5,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":".*","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":16}],"meta_start_col":5,"meta":{"logging":"off","name":"Sweetter","meta_start_line":2,"author":"Jessie Morris","meta_start_col":5},"dispatch_start_line":7,"global_start_col":5,"ruleset_name":"a41x49"}
