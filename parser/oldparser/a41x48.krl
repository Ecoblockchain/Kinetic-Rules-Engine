{"global":[{"source":"http://qa.ahika.com/page/jSample.html?req=3","name":"ksearch","type":"dataset","datatype":"JSON","cachable":1},{"emit":"function kNotifyDup(config, header, msg) {    \t        uniq = (Math.round(Math.random()*100000000)%100000000);    \t\t$K.kGrowl.defaults.header = header;    \t\tif(typeof config === 'object') {    \t\t\tjQuery.extend($K.kGrowl.defaults,config);    \t\t}    \t\t$K.kGrowl(msg);    \t\t\t    \t}                            "}],"global_start_line":16,"dispatch":[{"domain":"zappos.com","ruleset_id":null},{"domain":"google.com","ruleset_id":null},{"domain":"bing.com","ruleset_id":null},{"domain":"yahoo.com","ruleset_id":null},{"domain":"shoes.com","ruleset_id":null},{"domain":"secure.shoes.com","ruleset_id":null},{"domain":"expedia.com","ruleset_id":null},{"domain":"travelocity.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"Save money on shoes!","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {       $K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {  \t\t\t\t\t$K(this).trigger('kGrowl.close').remove();  \t\t\t\t\t});});                  "}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;    -moz-border-radius: 5px;    -webkit-border-radius: 5px;    background-color: #cf9414;    width: 240px;    text-align: center\">  <p style=\"color: #fff\" >  Use your American Express card and save 5% off your entire purchase  </p>  <p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  <img width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  </p>  <p style=\"color: #fff; text-align: center\">  Offer Expires 07/20/09  </p>  <p style=\"color: #fff; text-align: center; margin: 0; padding: 0;\">  <a href=\"http://offers.amexnetwork.com/selects/us/grid?categoryPath=/amexnetwork/category/Shopping&issuerName=us_prop\" target=\"_blank\" style=\"color: #fff\">Click here to learn more</a>  </p>  <p style=\"color: #000\">  <img style=\"cursor: pointer;\" href=\"http://www.travelocity.com\" style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/button.png\" width=\"100px\">  <span class=\"no_thanks\" style=\"cursor: pointer; \"><img  style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/red_button.png\" width=\"100px\"></span>  </p>  </div>     \n ","lhs":"invite","type":"here_doc"}],"name":"zapposnotify","start_col":5,"emit":"KOBJ.fill_card = function() {   $K('input[name=ccard_z_number]').attr('value','372155554444432');   $K('select[name=ccard_z_exp_month]>option[value=02]').attr('selected','selected');   $K('select[name=ccard_z_exp_year]>option[value=2011]').attr('selected','selected');  $K('select[name=ccard_type]>option[value=amex]').attr('selected','selected');  $K(\"div.kGrowl\").trigger(\"kGrowl.close\").remove();    };    $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"https://shopping.zappos.com/(r|reqauth)/checkout.cgi","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":21},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"annotate_search_results","args":[{"val":"search_selector","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":null,"name":"search","start_col":5,"emit":"function search_selector(obj){    function mk_anchor (o, key) {      var link_text = {        \"ksearch\": \"<img style='padding-top: 5px' src='http://img8.imageshack.us/img8/6153/amexlogo.jpg' border='0'>\"      };      return $K('<a href=' + o.link + '/>').attr(        {\"class\": 'KOBJ_'+key,         \"title\": o.text || \"Click here for discounts!\"        }).html(link_text[key]);    }      var host = KOBJ.get_host($K(obj).find(\"span.url, cite, span.a\").text());    var o = KOBJ.pick(KOBJ['data']['ksearch'][host]);    if(o) {       return mk_anchor(o,'ksearch');    } else {      false;    }  }            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"www.google.com|search.yahoo.com|www.bing.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":38},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"Save money on shoes!","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {       $K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {  \t\t\t\t\t$K(this).trigger('kGrowl.close').remove();  \t\t\t\t\t});});                  "}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;    -moz-border-radius: 5px;    -webkit-border-radius: 5px;    background-color: #cf9414;    width: 240px;    text-align: center\">  <p style=\"color: #fff\" >  Use your American Express card and save 20% off your entire purchase with Free shipping and Free returns  </p>  <p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  <img width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  </p>  <p style=\"color: #fff; text-align: center\">  Offer Expires 12/31/09  </p>  <p style=\"color: #fff; text-align: center; margin: 0; padding: 0;\">  <a href=\"http://offers.amexnetwork.com/portal/site/selects/menuitem.5e69a2019665ca81e0ba4d10101000f7/?vgnextoid=3fe92f824aa8f110VgnVCM1000001445640aRCRD&localLocale=en-us&categoryPath=%2Famexnetwork%2Fcategory%2FShopping&localCountryId=ccfb43b68d898110VgnVCM2000007cc6410aRCRD&countryId=ccfb43b68d898110VgnVCM2000007cc6410aRCRD&issuerName=us_prop\" target=\"_blank\" style=\"color: #fff\">Click here to learn more</a>  </p>  <p style=\"color: #000\">  <img style=\"cursor: pointer;\" href=\"http://www.travelocity.com\" style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/button.png\" width=\"100px\" onclick=\"KOBJ.fill_card()\">  <span class=\"no_thanks\" style=\"cursor: pointer; \"><img  style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/red_button.png\" width=\"100px\"></span>  </p>  </div>     \n ","lhs":"invite","type":"here_doc"}],"name":"shoes","start_col":5,"emit":"KOBJ.fill_card = function() {    \t$K('input[name=ctl00$cphPageMain$AddressSelector$FirstName]').val('John');  \t$K(\"#ctl00_cphPageMain_AddressSelector_LastName\").val('Doe');  \t$K(\"#ctl00_cphPageMain_AddressSelector_txtAddressLine1\").val(\"123 Fake Street\");  \t$K(\"#ctl00_cphPageMain_AddressSelector_txtCity\").val(\"New York\");  \t$K(\"#ctl00_cphPageMain_AddressSelector_ucState_ddlListItems\").val(\"NY\");  \t$K(\"#ctl00_cphPageMain_AddressSelector_txtZip\").val(\"10001\");  \t$K(\"#ctl00_cphPageMain_AddressSelector_txtDayTimePhone\").val(\"5558675309\");  \t$K('input[name=ctl00$cphPageMain$PaymentTypeSelector$CreditCardNumber]').attr('value','372155554444432');  \t$K('input[name=ctl00$cphPageMain$PromoCodeAndGiftCodeUC$Code]').attr('value','SUMMER');  \t$K('input[name=ctl00$cphPageMain$PromoCodeAndGiftCodeUC$SubmitButton]').click();  \t$K('select[name=ctl00$cphPageMain$PaymentTypeSelector$ExpiryMonth]>option[value=2]').attr('selected','selected');  \t$K('select[name=ctl00$cphPageMain$PaymentTypeSelector$ExpiryYear]>option[value=2011]').attr('selected','selected');  \t$K('input[name=ctl00$cphPageMain$PaymentTypeSelector$PaymentMethods]').val('RadioButton_New_Amex');  \t$K('input[id=ctl00_cphPageMain_PaymentTypeSelector_RadioButton_New_Amex]').attr('checked','checked');  \t$K(\"div.kGrowl\").trigger(\"kGrowl.close\").remove();    };    $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"https://secure.shoes.com/Checkout2/BillingInfo.aspx","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":45},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"Save money!","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {       $K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {  \t\t\t\t\t$K(this).trigger('kGrowl.close').remove();  \t\t\t\t\t});});                  "}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;    -moz-border-radius: 5px;    -webkit-border-radius: 5px;    background-color: #cf9414;    width: 240px;    text-align: center\">  <p style=\"color: #fff\" >  Expedia gives no deals to American Express card holders. Would you like to go to Travelocity which does?  </p>  <p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  <img width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  </p>  <p style=\"color: #000\">  <a href=\"http://www.travelocity.com\"><img style=\"cursor: pointer;\" style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/button.png\" width=\"100px\"></a>  <span class=\"no_thanks\" style=\"cursor: pointer; \"><img  style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/red_button.png\" width=\"100px\"></span>  </p>  </div>       \n ","lhs":"invite","type":"here_doc"}],"name":"expedia","start_col":5,"emit":"KOBJ.fill_card = function() {    $K(\"div.kGrowl\").trigger(\"kGrowl.close\").remove();    };    $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"expedia.com/$","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":62},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"Frequent Flier?","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {       $K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {  \t\t\t\t\t$K(this).trigger('kGrowl.close').remove();  \t\t\t\t\t});});                  "}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;    -moz-border-radius: 5px;    -webkit-border-radius: 5px;    background-color: #cf9414;    width: 240px;    text-align: center\">  <p style=\"color: #fff\" >  Pay with a AMX card and get double frequent flier miles!  </p>  <p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  <img width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  </p>  <p style=\"color: #000\">  <img border=\"none\" style=\"cursor: pointer;\" style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/button.png\" width=\"100px\" onclick=\"KOBJ.fill_card();\">  <span class=\"no_thanks\" style=\"cursor: pointer; \"><img  style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/red_button.png\" width=\"100px\"></span>  </p>  </div>       \n ","lhs":"invite","type":"here_doc"}],"name":"travelocity","start_col":5,"emit":"KOBJ.fill_card = function() {    $K(\"input[value=optional]\").val(\"1984927138724\");  $K(\"div.kGrowl\").trigger(\"kGrowl.close\").remove();    };    $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"https://travel.travelocity.com/checkout/PostReview.do","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":79},{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"title","type":"str"}],"type":"qualified"},{"val":"CheckoutBilling","type":"str"}],"type":"ineq","op":"eq"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"Use AMX","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {       $K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {  \t\t\t\t\t$K(this).trigger('kGrowl.close').remove();  \t\t\t\t\t});});                      "}],"post":null,"pre":[{"rhs":{"source":"page","predicate":"env","args":[{"val":"title","type":"str"}],"type":"qualified"},"lhs":"pageTitle","type":"expr"},{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;  \t  -moz-border-radius: 5px;  \t  -webkit-border-radius: 5px;  \t  background-color: #cf9414;  \t  width: 240px;  \t  text-align: center\">  \t<p style=\"color: #fff\" >  \tPay with your American Express card and get double Frequent Flier miles! Would you like to purchase your tickets with American Express?  \t</p>  \t<p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  \t<img width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  \t</p>  \t<p style=\"color: #000\">  \t<img border=\"none\" style=\"cursor: pointer;\" style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/button.png\" width=\"100px\" onclick=\"KOBJ.fill_card();\">  \t<span class=\"no_thanks\" style=\"cursor: pointer; \"><img  style=\"opacity: 1.0;\" src=\"http://caandb.com/kynetx/red_button.png\" width=\"100px\"></span>  \t</p>  \t</div>  \t  \t   \n ","lhs":"invite","type":"here_doc"}],"name":"travelocity_checkout","start_col":5,"emit":"KOBJ.fill_card = function() {  \t  \t$K(\"input[name=paymentMethodNumber]\").val(\"0000111144443333\");  \t$K(\"#otherCCV\").val(\"123\");  \t$K(\"div.kGrowl\").trigger(\"kGrowl.close\").remove();    };    $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"https://travel.travelocity.com/checkout/PostDisplaySeatMaps.do","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":96},{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"referer","type":"str"}],"type":"qualified"},{"val":"http://www.expedia.com/","type":"str"}],"type":"ineq","op":"eq"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"Thanks for coming!","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"referred = true;      $K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {      $K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {  \t\t\t\t\t$K(this).trigger('kGrowl.close').remove();  \t\t\t\t\t});});                        "}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;    -moz-border-radius: 5px;    -webkit-border-radius: 5px;    background-color: #cf9414;    width: 240px;    text-align: center\">  \t<p style=\"color: #fff\" >  \t\tYou just came from Expedia! When you confirm payment details, we'll give more details.  \t</p>  \t<p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  \t\t<img width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  \t</p>  </div>       \n ","lhs":"invite","type":"here_doc"}],"name":"travelocity_from_expedia","start_col":5,"emit":"referred = false;    $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"travelocity.com/$","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":117},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"close_notification","args":[{"val":"#kobj_discount","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;  \t  -moz-border-radius: 5px;  \t  -webkit-border-radius: 5px;  \t  background-color: #cf9414;  \t  width: 240px;  \t  text-align: center\">  \t\t<p style=\"color: #fff\" >  \t\t\tWhew! It sure is hot! Why not go someplace cool like <a href=\"http://www.travelocity.com/deals-d103-canada-vacations\">Canada</a> and get double Frequent Flier miles!  \t\t</p>  \t\t<p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  \t\t\t<img id=\"AMXimg\" width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  \t\t</p>  \t</div>    \n ","lhs":"warm","type":"here_doc"},{"rhs":{"source":"weather","predicate":"curr_temp","args":[],"type":"qualified"},"lhs":"temp","type":"expr"}],"name":"travelocity_hot","start_col":5,"emit":"if(typeof(referred) == \"undefined\") {  \treferred = false;  }    truthTest = (temp > 80 && referred != true);      $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";    if(truthTest) {  \tconfig = $K.kGrowl.defaults;  \tkNotifyDup(config,\"It sure is hot!\",warm);  }            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"travelocity.com/$","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":137},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"close_notification","args":[{"val":"#kobj_discount","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":"temp = weather:curr_temp;    \t<div id=\"kobj_discount\" style=\"padding: 3pt;  \t  -moz-border-radius: 5px;  \t  -webkit-border-radius: 5px;  \t  background-color: #cf9414;  \t  width: 240px;  \t  text-align: center\">  \t\t<p style=\"color: #fff\" >  \t\t\tBrrr! It's cold! Go someplace warm, like <a href=\"http://leisure.travelocity.com/Promotions/0,,TRAVELOCITY|2045|pkg_main,00.html\">The Caribbean</a>, and get double Frequent Flier Miles!  \t\t</p>  \t\t<p style=\"color: #000; background-color: #fff; margin:0;padding:0;\">  \t\t\t<img id=\"AMXimg\" width=\"218px\" src=\"http://img8.imageshack.us/img8/5348/cardri.gif\">  \t\t</p>  \t</div>    \n ","lhs":"cold","type":"here_doc"}],"name":"travelocity_cold","start_col":5,"emit":"if(typeof(referred) == \"undefined\") {  \treferred = false;  }    truthTest = (temp < 30 && referred != true);      $K.kGrowl.defaults.opacity = 1.0;  $K.kGrowl.defaults.width = \"250px\";    if(truthTest) {  \tconfig = $K.kGrowl.defaults;  \tkNotifyDup(config,\"It sure is cold!\",cold);  }            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"travelocity.com/$","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":150},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":null,"name":"shoes_clear","start_col":5,"emit":"$K(\"#ctl00_cphPageMain_PromoCode_Code\").val(\"CWIN10\");  \tsetTimeout(function() {  \t$K(\"#ctl00_cphPageMain_PromoCode_SubmitButton\").click();  \t},800);            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://www.shoes.com/Checkout/Cart.aspx","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":162}],"meta_start_col":5,"meta":{"logging":"off","name":"BankOfAmerica","meta_start_line":2,"meta_start_col":5},"dispatch_start_line":6,"global_start_col":5,"ruleset_name":"a41x48"}
