{"global":[{"emit":"var url_prefix = \"http://frag.kobj.net/clients/1024/images/\";\n \nvar link_text = {\n  \"boa\": \"<img style='padding-top: 5px' src='\" + url_prefix + \"boa_logo_34.png' border='0'>\",\n  \"sep\": \"<div style='padding-top: 13px'>|</div>\"\n};\n\nKOBJ.boa =\n          {\"www.zappos.com\" :\t\n               [{\"link\":\n                 \"https://additup.bankofamerica.com/jsp/14-retailerdetail.jsp?mid=177&\",\n\t\t \"text\":\n\t\t \"4% cash back when you shop through BAC\"\n                }\n               ],\n\t   \"www.target.com\" :\t\n               [{\"link\":\n                 \"https://additup.bankofamerica.com/jsp/14-retailerdetail.jsp?mid=35&\",\n\t\t \"text\":\n\t\t \"4% cash back when you shop through BAC\"\n                }\n               ],\n\t   \"www.apple.com\" :\t\n               [{\"link\":\n                 \"https://additup.bankofamerica.com/jsp/14-retailerdetail.jsp?mid=69&\",\n\t\t \"text\":\n\t\t \"4% cash back when you shop through BAC\"\n                }\n               ],\n\t   \"www.bestbuy.com\" :\t\n               [{\"link\":\n                 \"https://additup.bankofamerica.com/jsp/14-retailerdetail.jsp?mid=7&\",\n\t\t \"text\":\n\t\t \"4% cash back when you shop through BAC\"\n                }\n               ]\n    };\n\n\nfunction get_host(s) {\n var h = \"\";\n try {\n   h = s.match(/^(?:\\w+:\\/\\/)?([\\w.]+)/)[1];\n } catch(err) {\n }\n return h;\n}\n\nfunction pick (o) {\n    if (o) {\n        return o[Math.floor(Math.random()*o.length)];\n    } else {\n        return o;\n    }\n}\n\nfunction mk_list_item(i) {\n  return $K(\"<li class='KOBJ_item'>\").css(\n          {\"float\": \"left\",\n\t   \"margin\": \"0\",\n\t   \"vertical-align\": \"middle\",\n\t   \"padding-left\": \"4px\",\n\t   \"color\": \"#CCC\",\n\t   \"white-space\": \"nowrap\",\n           \"text-align\": \"center\"\n          }).append(i);\n}\n\nfunction mk_rm_div (anchor) {\n  var logo_item = mk_list_item(anchor);\n  var logo_list = $K('<ul>').css(\n          {\"margin\": \"0\",\n           \"padding\": \"0\",\n           \"list-style\": \"none\"\n          }).attr(\"id\", \"KOBJ_logo_list\").append(logo_item);\n  var inner_div = $K('<div>').css(\n          {\"float\": \"left\",\n           \"display\": \"inline\",\n           \"height\": \"40px\",\n           \"margin-left\": \"46px\",\n           \"padding-right\": \"15px\",\n           \"background-image\": \"url(\" + url_prefix + \"remindme_bar40_r.png)\",\n           \"background-repeat\": \"no-repeat\",\n           \"background-position\": \"right top\"\n          }).append(logo_list);\n  var rm_div = $K('<div>').css(\n          {\"float\": \"right\",\n           \"width\": \"auto\",\n           \"height\": \"40px\",\n           \"font-size\": \"12px\",\n           \"line-height\": \"normal\",\n           \"font-family\": \"Verdana, Geneva, sans-serif\",\n           \"background-image\": \"url(\"+ url_prefix + \"remindme_bar40_l.png)\", \n           \"background-repeat\": \"no-repeat\",\n           \"background-position\": \"left top\"\n\t   }).append(inner_div);\n  return rm_div;\n}\n\nfunction mk_anchor (o, key) {\n   return $K('<a href=' + o.link + '/>').attr(\n            {\"class\": 'KOBJ_'+key,\n     \t     \"title\": o.text || \"Click here for discounts!\"\n   \t    }).html(link_text[key]);\n}\n\nfunction insert_div(obj, selector, contents) {\n   if($K(obj).find('#KOBJ_logo_list li').is('.KOBJ_item')) {\n      $K(obj).find('#KOBJ_logo_list').append(mk_list_item(link_text['sep'])).append(mk_list_item(contents));\n   } else {\n      $K(obj).find(selector).prepend(mk_rm_div(contents));\n   }\n}\n\n\nfunction insert_div_google (key, obj) {\n   var host = get_host($K(obj).find(\"cite\").text());\n   var d = KOBJ[key];\n   var o = pick(d[host]);\n   if(o) {\n      insert_div(obj, \"div.s\", mk_anchor(o,key));\n   }\n};\n\n\nfunction insert_div_yahoo (key, obj) {\n   var host = get_host($K(obj).find(\"span.url\").text());\n   var d = KOBJ[key];\n   var o = pick(d[host]);\n   if(o) {\n      insert_div(obj, \"div.abstr\", mk_anchor(o,key));\n//     $K(obj).find(\"div.abstr\").prepend(mk_rm_div(mk_anchor(o,key)));\n   }\n};\n\n\n// special function to dummy up card information form filling\nfunction fill_card() {\n $K('input[name=ccard_z_number]').attr('value','4121555544444321');\n $K('select[name=ccard_z_exp_month]>option[value=02]').attr('selected','selected');\n $K('select[name=ccard_z_exp_year]>option[value=2011]').attr('selected','selected');\n}\n\n// change transparency\n$K.kGrowl.defaults.opacity = 1.0;\n\n\n"}],"global_start_line":9,"dispatch":[],"dispatch_start_col":null,"meta_start_line":5,"rules":[{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"datasets","type":"str"}],"type":"qualified"},{"val":"boa","type":"str"}],"type":"ineq","op":"like"},"blocktype":"every","actions":[{"label":null,"emit":"$K(\"li.g\").each(function() {\n insert_div_google('boa',this);\n});\n    "}],"post":null,"pre":[],"name":"boa_google","start_col":2,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://www.google.com/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":164},{"cond":{"args":[],"function_expr":{"val":"truth","type":"var"},"type":"app"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"<img src='http://frag.kobj.net/clients/1024/images/azigo_logo_black_34.png'","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {\n\t\t\t\t\t$K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {\n\t\t\t\t\t$K(this).trigger('kGrowl.close').remove();\n\t\t\t\t\t});});\n"}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  background-color: #FFFFFF;\n  width: 225px;\n  text-align: center\">\n<img src=\"http://frag.kobj.net/clients/1024/images/boa_logo_34.png\" align=\"right\">\n<p style=\"text-align: left;color: #8888FF\">Don't forget...</p>\n<p style=\"color: #000\" >\nUse your B of A card now and get additional WorldPoints Mall points for every dollar you spend at\n</p>\n<p style=\"color: #000\">\n<img src=\"http://frag.kobj.net/clients/1024/images/zappos_logo_57.png\"> \n</p>\n<p style=\"color: #000\">\nWant to use your B of A card?\n</p>\n<p style=\"color: #000\">\n<img onclick=\"javascript:fill_card();false;\" style=\"opacity: 1.0;\" src=\"http://frag.kobj.net/clients/1024/images/lets_use_it_33.png\"> \n<span class=\"no_thanks\" style=\"cursor: pointer; \"><img  style=\"opacity: 1.0;\" src=\"http://frag.kobj.net/clients/1024/images/no_thanks_33.png\"></span>\n</p>\n</div>\n   ","lhs":"invite","type":"here_doc"}],"name":"zappos_notify","start_col":1,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"https://shopping.zappos.com/reqauth/checkout.cgi","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":179},{"cond":{"args":[],"function_expr":{"val":"truth","type":"var"},"type":"app"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"top-right","type":"str"},{"val":"#FFF","type":"str"},{"val":"#000","type":"str"},{"val":"<img src='http://frag.kobj.net/clients/1024/images/azigo_logo_black_34.png'","type":"str"},{"val":"true","type":"bool"},{"val":"invite","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"$K(\"span.no_thanks\").bind(\"click.kGrowl\", function() {\n\t\t\t\t\t$K(this).unbind('click.kGrowl').parent().parent().parent().parent().trigger('kGrowl.beforeClose').animate({opacity: \t'hide'}, \"normal\", \"swing\", function() {\n\t\t\t\t\t$K(this).trigger('kGrowl.close').remove();\n\t\t\t\t\t});});\n"}],"post":null,"pre":[{"rhs":"<div id=\"kobj_discount\" style=\"padding: 3pt;\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  background-color: #FFFFFF;\n  width: 225px;\n  font-size: 14px;\n  text-align: center\">\n<img src=\"http://frag.kobj.net/clients/1024/images/boa_logo_34.png\" align=\"right\"> \n<p style=\"text-align: left;color: #8888FF\">Don't forget...</p>\n<br clear=\"right\"/>\n<p style=\"color: #000\" >\nAdd it Up members get <b>$5 cash back</b> by booking at \n</p>\n<p style=\"color: #000\">\n<img src=\"http://frag.kobj.net/clients/1024/images/orbitz_logo_83.png\"> \n</p>\n<p style=\"color: #000\">\nWant to book your travel there?\n</p>\n<p style=\"color: #000\">\n<a href=\"https://additup.bankofamerica.com/jsp/14-retailerdetail.jsp?mid=434&\"><img style=\"opacity: 1.0;\" border=\"0\" src=\"http://frag.kobj.net/clients/1024/images/go_to_orbitz_33.png\"> </a>\n<span class=\"no_thanks\" style=\"cursor: pointer; \"><img style=\"opacity: 1.0;\" src=\"http://frag.kobj.net/clients/1024/images/no_thanks_33.png\"></span><br/>\n<input type=\"checkbox\" name=\"stop\"> Don't show again\n</p>\n</div>\n   ","lhs":"invite","type":"here_doc"}],"name":"kayak_notify","start_col":1,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://www.kayak.com/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":231}],"meta_start_col":3,"meta":{"logging":"on","meta_start_line":5,"meta_start_col":3},"dispatch_start_line":null,"global_start_col":3,"ruleset_name":"azigo_boa_demo"}
