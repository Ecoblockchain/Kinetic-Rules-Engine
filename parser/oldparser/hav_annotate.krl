{"global":[{"source":"http://frag.kobj.net/clients/hav_annotate/hav_annotate1.json","name":"hav_annotate","type":"dataset","datatype":"JSON","cachable":0}],"global_start_line":12,"dispatch":[],"dispatch_start_col":null,"meta_start_line":5,"rules":[{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"datasets","type":"str"}],"type":"qualified"},{"val":"hav_annotate","type":"str"}],"type":"ineq","op":"like"},"blocktype":"every","actions":[{"action":{"source":null,"name":"annotate_search_results","args":[{"val":"hav_annotate_selector","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[],"name":"hav_annotate","start_col":2,"emit":"function hav_annotate_selector(obj){\n  function mk_anchor (o, key) {\n    var url_prefix = \"http://frag.kobj.net/clients/hav_annotate/images/\";\n    var link_text = {\n      \"hav_annotate\": \"<div style='padding-top: 13px'>ABC 4 Deals!</div>\",\n    };\n    return $K('<a href=' + o.link + '/>').attr(\n      {\"class\": 'KOBJ_'+key,\n       \"title\": o.text || \"Click here for discounts!\"\n      }).html(link_text[key]);\n  }\n\n  var host = KOBJ.get_host($K(obj).find(\"span.url, cite\").text());\n  var o = KOBJ.pick(hav_annotate[host]);\n  if(o) {\n     return mk_anchor(o,'hav_annotate');\n  } else {\n    false;\n  }\n}\n\nvar url_prefix = \"http://frag.kobj.net/clients/hav_annotate/images/\";\nKOBJ.search_annotation.defaults.head_background_image = url_prefix + \"hav_annotate_bar40_l.png\";\nKOBJ.search_annotation.defaults.tail_background_image = url_prefix + \"hav_annotate_bar40_r.png\";\nKOBJ.search_annotation.defaults.name = \"hav_annotate\";\nKOBJ.search_annotation.defaults.height = \"40px\";\nKOBJ.search_annotation.defaults.left_margin = \"46px\";\n","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"www.google.com|search.yahoo.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":16}],"meta_start_col":3,"meta":{"logging":"on","meta_start_line":5,"description":"Development ruleset for search annotate HAV product\n","meta_start_col":3},"dispatch_start_line":null,"global_start_col":3,"ruleset_name":"hav_annotate"}
