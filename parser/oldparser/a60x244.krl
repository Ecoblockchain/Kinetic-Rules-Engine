{"global":[],"global_start_line":16,"dispatch":[{"domain":"byui.edu","ruleset_id":null}],"dispatch_start_col":3,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"Faculty FaceBook Search","type":"str"},{"val":"Click the links to search the faculty list on FaceBook in groups of 20","type":"str"}],"modifiers":[{"value":{"val":"true","type":"bool"},"name":"sticky"}],"vars":null},"label":null},{"action":{"source":null,"name":"append","args":[{"val":"head","type":"str"},{"val":"globalScript","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"var i = 0;\n        bundler = 0;\n        bundle = 0;\n        $K(\"div.PersonTable tr\").each(function() {\n          if(i == 0) {\n            $K(this).find(\"th:eq(1)\").after(\"<th scope=\\\"col\\\">Search&nbsp;</th>\");\n            i++;\n          } else { \n            var full = $K(this).find(\"td:eq(1) a\").text();\n            if( full ) { // check if null because last row breaks script\n              var name = /(.*),\\s(.*)/.exec(full);\n              var url = \"http://www.facebook.com/find-friends/#!/search/?ref=ffs&q=\" + name[2] + \"%20\" + name[1] + \"&o=2048&init=ffs\";\n              kvars.urls.push(url);\n              $K(this).find(\"td:eq(1)\").after(\"<td><a target=\\\"_blank\\\" href=\\\"\" + url + \"\\\">&nbsp;<img src=\\\"https://kynetx-apps.s3.amazonaws.com/connecting-byui-staff-and-students/fb.png\\\"/></a></td>\");\n              i++;\n              bundler++;\n              if(bundler == 19) {\n                bundler = 0;\n                $K(\"div.AplhaPaging\").before(\"<a onClick=\\\"openFBSearches(\" + bundle + \");return false\\\"><h1>FaceBook Search \" + (bundle + 1) + \"</h1></a>\");\n                bundle++;\n              }\n            }\n          }\n        });\n        if(bundler != 0) {\n          $K(\"div.AplhaPaging\").before(\"<a onClick=\\\"openFBSearches(\" + bundle + \");return false\\\"><h1>FaceBook Search \" + (bundle + 1) + \"</h1></a>\");\n        }\n      "}],"post":null,"pre":[{"rhs":"<script type=\"text/javascript\">         \n          var kvars = {}; \n          kvars.urls = [];    \n          function openFBSearches(bundle) {\n            var start = bundle * 20;\n            var end = start + 20;\n            for(var i=0; i < end; i++) {\n              if(i + start >= kvars.urls.length) { break; }\n              window.open(kvars.urls[start + i]);\n            }\n          }\n        </script>\n      ","lhs":"globalScript","type":"here_doc"}],"name":"faculty_index_pages","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":"directory\\/employees\\/Default","type":"prim_event","vars":null,"op":"pageview"},"foreach":[]},"start_line":18},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"append","args":[{"val":"div#EmployeeContactInfo","type":"str"},{"val":"fbNote","type":"var"}],"modifiers":null,"vars":null},"label":null},{"label":null,"emit":"var name = $K(\"div#EmployeeName span\").text();\n        var urlName = \"http://www.facebook.com/find-friends/#!/search/?ref=ffs&q=\" + name.replace(/\\s/g,\"%20\") + \"&o=2048&init=ffs\";\n        $K(\"div#EmployeeName span\").prepend(\"<a target=\\\"_blank\\\" href=\\\"\" + urlName + \"\\\"><img src=\\\"https://kynetx-apps.s3.amazonaws.com/connecting-byui-staff-and-students/fb.png\\\"/></a>&nbsp;&nbsp;\");\n        var email = $K(\"div#EmployeeContactInfo tr:eq(3) a\").text();\n        var urlEmail = \"http://www.facebook.com/srch.php#!/search/?o=2048&init=s%3Aemail&q=\" + email.replace(/@/g,\"%40\");\n        $K(\"div#EmployeeContactInfo tr:eq(3)\").append(\"<td><a target=\\\"_blank\\\" href=\\\"\" + urlEmail + \"\\\"><img src=\\\"https://kynetx-apps.s3.amazonaws.com/connecting-byui-staff-and-students/fb.png\\\"/></a>&nbsp;</td>\");\n      "}],"post":null,"pre":[{"rhs":"<br/>\n        <div>\n          <h3>Facebook Search</h3>\n          <p>You can search for this teacher using their name or email. Just click on the facebook icons next to the data listed above.</p>\n        </div>\n      ","lhs":"fbNote","type":"here_doc"}],"name":"faculty_detail_pages","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":"directory\\/employees\\/OfficeHours","type":"prim_event","vars":null,"op":"pageview"},"foreach":[]},"start_line":71}],"meta_start_col":3,"meta":{"keys":{"errorstack":"68d080f317709b9defac9989e1359ad9"},"logging":"on","name":"BYUI Facebook Connect","meta_start_line":2,"author":"Mike Grace","description":"BYUI FB teacher search\n    ","meta_start_col":3},"dispatch_start_line":12,"global_start_col":3,"ruleset_name":"a60x244"}
