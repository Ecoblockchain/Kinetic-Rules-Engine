{"global":[{"source":"http://webhost.kynetx.com:8080/flight/info/","name":"flightinfo","type":"datasource","datatype":"JSON","cachable":0},{"source":"http://ws.geonames.org/findNearbyWikipediaJSON","name":"placearticles","type":"datasource","datatype":"JSON","cachable":0}],"global_start_line":16,"dispatch":[{"domain":"wikipedia.org","ruleset_id":null}],"dispatch_start_col":3,"meta_start_line":2,"rules":[{"cond":{"args":[{"domain":"ent","name":"hasident","type":"persistent"}],"type":"pred","op":"negation"},"blocktype":"every","actions":[{"action":{"source":null,"name":"sidetab","args":[],"modifiers":[{"value":{"val":"setupformhtml","type":"var"},"name":"message"},{"value":{"val":"slideout","type":"str"},"name":"mode"},{"value":{"val":"click","type":"str"},"name":"action"},{"value":{"val":"true","type":"bool"},"name":"onLoadSlideOut"},{"value":{"val":"http://k-misc.s3.amazonaws.com/resources/a8x48/tab.png","type":"str"},"name":"pathToTabImage"},{"value":{"val":"80px","type":"str"},"name":"imageHeight"}],"vars":null},"label":null},{"action":{"source":null,"name":"watch","args":[{"val":"#flightinfoform","type":"str"},{"val":"submit","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":{"alt":null,"type":"fired","cons":[{"test":null,"statement":"last","type":"control"}]},"pre":[{"rhs":"<div style=\"border:1px solid black;padding:10px;background-color:white;\">\n        <h3>Which flight are you on?</h3>\n        <form id=\"flightinfoform\">\n          Flight Number: <input name=\"ident\" value=\"\"/><br/>\n          <input type=\"submit\" value=\"Set Flight Number\"/>\n        </form>\n        <br/><br/><br/><br/>\n      </div>\n      ","lhs":"setupformhtml","type":"here_doc"}],"name":"setupform","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":".*","type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":21},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"redirect","args":[{"val":"samepage","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":{"alt":null,"type":"fired","cons":[{"test":null,"domain":"ent","name":"ident","action":"mark","type":"persistent","with":{"val":"ident","type":"var"}},{"test":null,"domain":"ent","name":"hasident","action":"set","type":"persistent"}]},"pre":[{"rhs":{"source":"page","predicate":"param","args":[{"val":"ident","type":"str"}],"type":"qualified"},"lhs":"ident","type":"expr"},{"rhs":{"source":"page","predicate":"env","args":[{"val":"caller","type":"str"}],"type":"qualified"},"lhs":"samepage","type":"expr"}],"name":"saveident","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"on":null,"domain":"web","type":"prim_event","vars":null,"op":"submit","element":"#flightinfoform"},"foreach":[]},"start_line":51},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null,"vars":null},"label":null}],"post":{"alt":null,"type":"fired","cons":[{"test":null,"domain":"ent","name":"loc","action":"clear","type":"persistent"},{"test":null,"domain":"ent","name":"loc","action":"mark","type":"persistent","with":{"val":"lon","type":"var"}},{"test":null,"domain":"ent","name":"loc","action":"mark","type":"persistent","with":{"val":"lat","type":"var"}}]},"pre":[{"rhs":{"source":"datasource","predicate":"flightinfo","args":[{"domain":"ent","name":"ident","type":"trail_history","offset":{"val":"0","type":"num"}}],"type":"qualified"},"lhs":"flightinfo","type":"expr"},{"rhs":{"domain":"ent","name":"ident","type":"trail_history","offset":{"val":"0","type":"num"}},"lhs":"ident","type":"expr"},{"rhs":{"obj":{"val":"flightinfo","type":"var"},"args":[{"val":"$..latitude","type":"str"}],"name":"pick","type":"operator"},"lhs":"lat","type":"expr"},{"rhs":{"obj":{"val":"flightinfo","type":"var"},"args":[{"val":"$..longitude","type":"str"}],"name":"pick","type":"operator"},"lhs":"lon","type":"expr"}],"name":"getlocation","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":".*","type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":64},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"sidetab","args":[],"modifiers":[{"value":{"val":"flyoverhtml","type":"var"},"name":"message"},{"value":{"val":"slideout","type":"str"},"name":"mode"},{"value":{"val":"click","type":"str"},"name":"action"},{"value":{"val":"true","type":"bool"},"name":"onLoadSlideOut"},{"value":{"val":"http://k-misc.s3.amazonaws.com/resources/a8x48/tab.png","type":"str"},"name":"pathToTabImage"},{"value":{"val":"80px","type":"str"},"name":"imageHeight"}],"vars":null},"label":null},{"action":{"source":null,"name":"watch","args":[{"val":"#resetform","type":"str"},{"val":"submit","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":"<div style=\"border:1px solid black;padding:10px;background-color:white;\">\n        <h3>Currently Flying Over</h3 >\n        <div id='flyingover'></div>\n        <br/>\n        <form id=\"resetform\" onsubmit=\"return false;\">\n          <input type=\"submit\" value=\"Reset Flight\"/>\n        </form>\n        </div>\n      ","lhs":"flyoverhtml","type":"here_doc"}],"name":"prepcontainer","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":".*","type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":79},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"redirect","args":[{"val":"samepage","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":{"alt":null,"type":"fired","cons":[{"test":null,"domain":"ent","name":"ident","action":"clear","type":"persistent"},{"test":null,"domain":"ent","name":"hasident","action":"clear","type":"persistent"}]},"pre":[{"rhs":{"source":"page","predicate":"env","args":[{"val":"caller","type":"str"}],"type":"qualified"},"lhs":"samepage","type":"expr"}],"name":"clearident","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"on":null,"domain":"web","type":"prim_event","vars":null,"op":"submit","element":"#resetform"},"foreach":[]},"start_line":104},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"append","args":[{"val":"#flyingover","type":"str"},{"val":"mapimage","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"val":"http://maps.google.com/maps/api/staticmap?center=#{history 0 ent:loc},#{history 1 ent:loc}&zoom=6&size=225x225&markers=icon:http://k-misc.s3.amazonaws.com/resources/a8x48/airplane_icon_small.png|#{history 0 ent:loc},#{history 1 ent:loc}&sensor=false","type":"str"},"lhs":"marker","type":"expr"},{"rhs":{"val":"<img src='#{marker}' style='border:1px solid black;'/><br/><br/>","type":"str"},"lhs":"mapimage","type":"expr"}],"name":"prepimageurl","start_col":4,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":".*","type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":116},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"append","args":[{"val":"#flyingover","type":"str"},{"val":"<a href='http://#{link}'>#{title}</a><br/>","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"obj":{"val":"item","type":"var"},"args":[{"val":"$..title","type":"str"}],"name":"pick","type":"operator"},"lhs":"title","type":"expr"},{"rhs":{"obj":{"val":"item","type":"var"},"args":[{"val":"$..wikipediaUrl","type":"str"}],"name":"pick","type":"operator"},"lhs":"link","type":"expr"}],"name":"showwikientries","start_col":3,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"domain":null,"pattern":".*","type":"prim_event","vars":[],"op":"pageview"},"foreach":[{"expr":{"obj":{"source":"datasource","predicate":"placearticles","args":[{"val":[{"rhs":{"domain":"ent","name":"loc","type":"trail_history","offset":{"val":0,"type":"num"}},"lhs":"lat"},{"rhs":{"domain":"ent","name":"loc","type":"trail_history","offset":{"val":1,"type":"num"}},"lhs":"lng"},{"rhs":{"val":"full","type":"str"},"lhs":"style"},{"rhs":{"val":"true","type":"str"},"lhs":"formatted"}],"type":"hashraw"}],"type":"qualified"},"args":[{"val":"$..geonames","type":"str"}],"name":"pick","type":"operator"},"var":["item"]}]},"start_line":125}],"meta_start_col":3,"meta":{"logging":"on","name":"FlightSpot","meta_start_line":2,"author":"TubTeam","description":"Gonna Win\n    ","meta_start_col":3},"dispatch_start_line":11,"global_start_col":3,"ruleset_name":"a8x48"}
