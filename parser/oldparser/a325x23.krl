{"global":[{"source":"http://feeds2.feedburner.com/rgbusiness","name":"feed_data_yahoo","type":"dataset","datatype":"JSON","cachable":0},{"source":"http://feeds2.feedburner.com/rgsports","name":"feed_data_espn","type":"dataset","datatype":"JSON","cachable":0},{"source":"http://feeds2.feedburner.com/rgnews","name":"feed_data_cnn","type":"dataset","datatype":"JSON","cachable":0},{"source":"http://feeds2.feedburner.com/rglifestyles","name":"feed_data_facebook","type":"dataset","datatype":"JSON","cachable":0},{"content":".dti300 {            text-align:left;      background-color:#FAFAFA;      border: 1px solid #CCC;      padding: 2px;        }        .dti920 {            text-align:left;      background-color:#FAFAFA;      border: 1px solid #CCC;      padding: 2px;    }        .dti300 ul, .dti920 ul {      list-style-type: disc !important;      font-size:0.9em;      margin-left: 5px;      padding-left: 5px;    }        .dti300 ul li, .dti920 ul li {      list-style-type: disc !important;      margin-left: 10px;      padding-top: 1px;    }        .dtibox {      width:980px;            background-color:#FAFAFA;      margin:5px;      border: solid 1px #ccc;    }        .dtibox1 {            display:inline;    }        .dtibox2 {            background-color:#FAFAFA;      text-align:left;      display:inline;    }        .dtibox2 ul li {      margin-left:30px;    }    ","type":"css"},{"emit":"var DTI_lightning_host = \"spidey.dtint.com\";          var DTI_NS = \"cms\";          var DTI_AUDIENCE_NS = \"ad\";          var DTI_Pub = \"DTNews\";          var DTI_Section = \"Home\";          var DTI_Debug = \"\";              function readRssFeeds(feedItems, divClass, headerElement, id) {              var outerDiv = $K(\"<div></div>\");\t                    var innerDiv = $K(\"<div></div>\");              innerDiv.attr(\"class\", divClass);                  \t  if(headerElement == null) {    \t\theaderElement = \"<p>Your local news from\"+\" \"+\"<img style='vertical-align:middle;' src='https://www.azigo.com/demo2/dti/register-guard-14.png' /></p>\";    \t  }                  var headerP = headerElement;                            innerDiv.append(headerP);        \t    \t  var feedListUl = $K(\"<ul></ul>\");        \t  for(var i = 0; i < feedItems.length; i++) {    \t\tif(i == 3)    \t\t   break;    \t\tvar feedItem = makeAnchorTag(feedItems[i].link.$t, null, feedItems[i].title.$t);\t\t                          feedListUl.append(makeListItem(null, null, feedItem));    \t  }        \t  innerDiv.append(feedListUl);                            outerDiv.append(innerDiv);              outerDiv.append(insertTrackingImage(id));                  return outerDiv;          }              function readRssFeedsFromCnn(feedItems, id) {    \t  var outerDiv = $K(\"<div></div>\");              outerDiv.attr({\"id\":\"dtibox\", \"class\":\"dtibox\"});                  var innerDiv1 = $K(\"<div></div>\");              innerDiv1.attr(\"class\", \"dtibox1\");                  var innerDiv2 = $K(\"<div></div>\");              innerDiv2.attr(\"class\", \"dtibox2\");                  var adBanner = createAd(\"Banner\", 468, 60);              innerDiv1.append(adBanner);                           var headerP = \"<p>Your local news from\"+\" \"+\"<img style='vertical-align:middle;' src='https://www.azigo.com/demo2/dti/register-guard-14.png' /></p>\";              innerDiv2.append(headerP);        \t    \t  var feedListUl = $K(\"<ul></ul>\");        \t  for(var i = 0; i < feedItems.length; i++) {    \t\tif(i == 3)    \t\t   break;    \t\tvar feedItem = makeAnchorTag(feedItems[i].link.$t, null, feedItems[i].title.$t);\t\t                          feedListUl.append(makeListItem(null, null, feedItem));    \t  }        \t  innerDiv2.append(feedListUl);                            outerDiv.append(innerDiv1);              outerDiv.append(innerDiv2);              outerDiv.append(insertTrackingImage(id));                  return outerDiv;          }              function makeListItem(listItemId, listItemClass, listItemContent) {               var listItem = $K(\"<li></li>\");               if(listItemClass != null) {                   listItem.attr(\"class\", listItemClass);               }    \t   if(listItemId != null) {    \t       listItem.attr(\"id\", listItemId);    \t   }               listItem.append(listItemContent);               return listItem;                  }              function makeAnchorTag(aUrl, aClass, aText)          {               var anchorTag = $K(\"<a></a>\");               anchorTag.attr(\"href\", aUrl);               if(aClass != null) {                   anchorTag.attr(\"class\", aClass);               }               anchorTag.append(aText);               return anchorTag;          }              function createAd(adName,adWidth,adHeight)          {    \t   var frameElement = $K(\"<iframe></iframe>\");    \t   frameElement.attr({    \t\t\t\t\"src\":\"http://\"+DTI_lightning_host+\"/csp/\"+DTI_NS+\"/sites/\"+DTI_Pub+\"/assets/includes/AdServerTest.csp?areaName=\"+adName+adWidth+\"x\"+adHeight+\"&pubName=\"+DTI_Pub+\"&sectionName=\"+DTI_Section+\"\",    \t\t\t\t\"width\":adWidth,    \t\t\t\t\"height\":adHeight,    \t\t\t\t\"frameborder\":\"0\",    \t\t\t\t\"scrolling\":\"no\",    \t\t\t\t\"vspace\":\"0\",    \t\t\t\t\"style\":\"left:0pt;position:relative;top:0pt;\",    \t\t\t\t\"marginwidth\":\"0\",    \t\t\t\t\"marginheight\":\"0\",    \t\t\t\t\"hspace\":\"0\",    \t\t\t\t\"allowtransparency\":\"true\"    \t\t\t    });        \t   return frameElement;          }              function DTI_TARGET(vid, publication, websection, keywords)          {    \t   var w = 0;    \t   var h = 0;        \t     \t     \t   var DTI_RandomNumber=Math.floor(Math.random()*1000000);    \t   var DTI_path = \"/audience/stats/\"+DTI_RandomNumber+\"?\";        \t   var a = $K(\"<img></img>\");    \t   a.attr({    \t\t\t\"src\":\"http://\"+DTI_lightning_host+DTI_path+\"&source=\"+websection+\"&Cookie=\"+vid+\"&Publication=\"+publication+\"&debug=\"+DTI_Debug+\"&Keywords=\"+keywords+\"\",    \t\t\t\"width\":w,    \t\t\t\"height\":h,    \t\t\t\"alt\":\"\"    \t\t });        \t   return a;          }              function DTI_GetSEOKeywords()          {      \t   var content = \"\";    \t   var meta=document.getElementsByTagName(\"meta\");    \t   for (i=0;i<meta.length;i++) {    \t       nameAttribute = meta[i].name.search(/keywords/);    \t       if (nameAttribute!= -1) {    \t\t  content = meta[i].content;    \t       }    \t   }    \t   return content;          }              function DTI_GetOmnitureSection()          {                 var websection = \"\";    \t   var meta=document.getElementsByTagName(\"meta\");        \t   for (i=0;i<meta.length;i++) {    \t       nameAttribute = meta[i].name.search(/section/);        \t       if (meta[i].name.toLowerCase() == \"section\") {    \t\t  websection = meta[i].content;    \t \t  break;    \t       }    \t   }    \t   return websection;          }              function insertTrackingImage(id) {    \t                  \t                  var datasetId = id;    \t     \t     \t   var websection = DTI_GetOmnitureSection();    \t   if ((websection == null) || (websection == \"\"))    \t   {\t    \t\twebsection = \"undefined\";\t  \t   }    \t     \t     \t   var publication = \"azigo\";                               \t   var  keywords = DTI_GetSEOKeywords();    \t   if ((keywords == ''))    \t   {    \t\tkeywords = \"undefined\";    \t   }    \t   return(DTI_TARGET(datasetId, publication, websection, keywords));          }                    "}],"global_start_line":13,"dispatch":[{"domain":"finance.yahoo.com","ruleset_id":null},{"domain":"www.facebook.com","ruleset_id":null},{"domain":"espn.go.com","ruleset_id":null},{"domain":"www.cnn.com","ruleset_id":null},{"domain":"edition.cnn.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"args":[],"function_expr":{"val":"truth","type":"var"},"type":"app"},"blocktype":"every","actions":[{"label":null,"emit":"var displayDiv = readRssFeeds(rss_items, \"dti300\", null, id);        \t\tdisplayDiv.append(createAd(\"Box\", 300, 250));    \t                    "},{"action":{"source":null,"name":"before","args":[{"val":"#yfi_fp_ad_lrec","type":"str"},{"val":"displayDiv","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"rss","predicate":"items","args":[{"val":"feed_data_yahoo","type":"var"}],"type":"qualified"},"lhs":"rss_items","type":"expr"},{"rhs":{"source":"page","predicate":"param","args":[{"val":"datasets","type":"str"}],"type":"qualified"},"lhs":"id","type":"expr"}],"name":"yahoo_finance","start_col":5,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://finance.yahoo.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":22},{"cond":{"args":[],"function_expr":{"val":"truth","type":"var"},"type":"app"},"blocktype":"every","actions":[{"label":null,"emit":"var displayDiv = readRssFeeds(rss_items, \"dti920\", null, id);    \t                    "},{"action":{"source":null,"name":"replace_inner","args":[{"val":"#AdContainer","type":"str"},{"args":[{"val":"Box","type":"str"},{"val":300,"type":"num"},{"val":250,"type":"num"}],"function_expr":{"val":"createAd","type":"var"},"type":"app"}],"modifiers":null,"vars":null},"label":null},{"action":{"source":null,"name":"append","args":[{"val":"#top-stories","type":"str"},{"val":"displayDiv","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"rss","predicate":"items","args":[{"val":"feed_data_espn","type":"var"}],"type":"qualified"},"lhs":"rss_items","type":"expr"},{"rhs":{"source":"page","predicate":"param","args":[{"val":"datasets","type":"str"}],"type":"qualified"},"lhs":"id","type":"expr"}],"name":"espn","start_col":5,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://espn.go.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":39},{"cond":{"args":[],"function_expr":{"val":"truth","type":"var"},"type":"app"},"blocktype":"every","actions":[{"label":null,"emit":"var displayDiv = readRssFeedsFromCnn(rss_items, id);    \t\tif($K(\"#cnn_maincntnr\").length) {    \t\t\t$K(\"#cnn_maincntnr\").prepend(displayDiv);    \t\t}    \t\telse {    \t\t\t$K(\".cnn_maincntnr\").prepend(displayDiv);    \t\t}        \t                "}],"post":null,"pre":[{"rhs":{"source":"rss","predicate":"items","args":[{"val":"feed_data_cnn","type":"var"}],"type":"qualified"},"lhs":"rss_items","type":"expr"},{"rhs":{"source":"page","predicate":"param","args":[{"val":"datasets","type":"str"}],"type":"qualified"},"lhs":"id","type":"expr"}],"name":"cnn","start_col":5,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"^http://edition.cnn.com|^http://www.cnn.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":57},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"label":null,"emit":"var displayDiv = readRssFeeds(rss_items, \"dti300\", null, id);        \t\tvar bannerParent = $K(\"<div></div>\");    \t\tvar bannerDiv = createAd(\"Box\", 200, 150);    \t\tbannerParent.append(bannerDiv);    \t\tbannerParent.append(\"<p>Ad from DTI Audience Reach</p>\");                        displayDiv.append(bannerParent);    \t                "},{"action":{"source":null,"name":"prepend","args":[{"val":"#home_sponsor_nile","type":"str"},{"val":"displayDiv","type":"var"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"rss","predicate":"items","args":[{"val":"feed_data_facebook","type":"var"}],"type":"qualified"},"lhs":"rss_items","type":"expr"},{"rhs":{"source":"page","predicate":"param","args":[{"val":"datasets","type":"str"}],"type":"qualified"},"lhs":"id","type":"expr"}],"name":"facebook","start_col":5,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://www.facebook.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":71}],"meta_start_col":5,"meta":{"logging":"off","name":"DTI Demo3","meta_start_line":2,"meta_start_col":5},"dispatch_start_line":6,"global_start_col":5,"ruleset_name":"a325x23"}
