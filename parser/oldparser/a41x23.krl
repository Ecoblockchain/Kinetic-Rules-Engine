{"global":[{"source":"http://query.yahooapis.com/v1/public/yql?","name":"yql","type":"datasource","datatype":"JSON","cachable":{"period":"seconds","value":"2"}}],"global_start_line":12,"dispatch":[{"domain":"google.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":"q=select%20*%20from%20csv%20where%20url%3D'http%3A%2F%2Fspreadsheets.google.com%2Fpub%3Fkey%3DrepmSxxTI9Z3KgHmGWK8Wpw%26output%3Dcsv'%20and%20columns%3D'url%2Clink%2Ccity%2Cname'%3B&format=json&callback=\n ","lhs":"query","type":"here_doc"},{"rhs":{"source":"datasource","predicate":"yql","args":[{"val":"query","type":"var"}],"type":"qualified"},"lhs":"yqlResults","type":"expr"},{"rhs":{"obj":{"val":"yqlResults","type":"var"},"args":[{"val":"$..row","type":"str"}],"name":"pick","type":"operator"},"lhs":"rows","type":"expr"},{"rhs":{"obj":{"val":"yqlResults","type":"var"},"args":[{"val":"$..count","type":"str"}],"name":"pick","type":"operator"},"lhs":"count","type":"expr"}],"name":"annotate","start_col":5,"emit":"function returnGoodJson(badJson) {  \t\tgoodJson = new Object;  \t\trows = badJson[\"query\"][\"results\"][\"row\"];  \t\tfor(var i = 0; i<count; i++) {  \t\t\t  \t\t\t  \t\t\thtml = rows[i][\"html\"];  \t\t\turl = rows[i][\"urls\"];  \t  \t\t\tgoodJson[url] = [{'html':html}];  \t\t}  \t\treturn goodJson;    \t}      \tfunction testToPercolate(obj) {        \t\thost = $K(obj).find(\"span.url, cite\").text();  \t\thostAfter = KOBJ.get_host(host);  \t\thost = hostAfter;  \t  \tvar spreadSheet = returnGoodJson(yqlResults);  \t\tif(spreadSheet!=-1) {  \t\t\tjQSpreadSheet = $K(spreadSheet);  \t\t\tjQSpreadSheet.each(function() {  \t\t\t\ttestErr = (typeof(spreadSheet[host]) != \"undefined\");  \t\t\t\tif(testErr) {    \t\t\t\t\tappendTrue = true;  \t\t\t\t\treturn false;  \t\t\t\t}  \t\t\t\telse {  \t\t\t\t\tappendTrue = false;  \t\t\t\t}  \t\t\t});  \t\t\tif(appendTrue) {  \t\t\t\treturn true;  \t\t\t} else {  \t\t\t\treturn false;  \t\t\t}\t  \t\t}  \t}          percolate_search_results(testToPercolate);            ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"google.com/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":15}],"meta_start_col":5,"meta":{"logging":"off","name":"Local Love","meta_start_line":2,"description":"Local love, baby!     \n","meta_start_col":5},"dispatch_start_line":9,"global_start_col":5,"ruleset_name":"a41x23"}
