{"global":[{"source":"http://service.azigo.com/updates/kynetx/datasets/bcc.json","name":"bcc","type":"dataset","datatype":"JSON","cachable":1}],"global_start_line":12,"dispatch":[{"domain":"maps.google.com","ruleset_id":null},{"domain":"local.yahoo.com","ruleset_id":null},{"domain":"search.boston.com","ruleset_id":null},{"domain":"www.yelp.com","ruleset_id":null}],"dispatch_start_col":5,"meta_start_line":2,"rules":[{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"datasets","type":"str"}],"type":"qualified"},{"val":"bcc","type":"str"}],"type":"ineq","op":"like"},"blocktype":"every","actions":[{"label":null,"emit":"var KOBJ_bcc_html = function(bcc_data, container_tag) {     var bcc_html = $K('<img>').attr(        {\"src\": \"http://frag.kobj.net/clients/15/images/BCC_logo.png\",         \"border\": \"0\",         \"align\": \"left\",         \"valign\": \"middle\"         });       if(bcc_data.link) {       bcc_html = $K('<a>').attr(         {\"class\": \"KOBJ_bcc\",          \"href\": bcc_data.link,  \t\"title\": bcc_data.text  \t}).append(bcc_html);     }       var td1 = $K('<td>').append(bcc_html);     var td2 = $K('<td>').attr(                  {\"bgcolor\": '#ccffcc'  \t\t}).text(bcc_data.text);       bcc_html = $K('<table>').css('padding','10px').append(                      $K('<tr>').append(td1).append(td2)  \t\t    );       return $K(container_tag).append(bcc_html);  };      KOBJ.bcc_googlemaps_ol = function() {    console.log(\"starting annotation\");   $K(\"div.local div.res div.one\").each(function() {     var pn = $K(this).find(\"span.tel\").text().replace(/\\(|\\)|-|\\.|\\s/g,'');     console.log(\"phone\", pn);     var o = KOBJ.pick(KOBJ['data']['bcc'][pn]);     if(o)  {       console.log(\"match: \", o);  \t$K(this).find(\"div.s\").after(KOBJ_bcc_html(o, '<div>'));     };     });   return true;  };  $K(\"form#q_form\").submit(function(e){    setTimeout(\"KOBJ.bcc_googlemaps_ol();\",2000);  });                        "}],"post":null,"pre":[],"name":"bccgooglemaps","start_col":5,"emit":null,"state":"active","callbacks":{"success":[{"attribute":"class","trigger":null,"value":"KOBJ_bcc","type":"click"}],"failure":null},"pagetype":{"event_expr":{"pattern":"^http://maps.google.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":15},{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"datasets","type":"str"}],"type":"qualified"},{"val":"bcc","type":"str"}],"type":"ineq","op":"like"},"blocktype":"every","actions":[{"label":null,"emit":"var KOBJ_bcc_html = function(bcc_data, container_tag) {     var bcc_html = $K('<img>').attr(        {\"src\": \"http://frag.kobj.net/clients/15/images/BCC_logo.png\",         \"border\": \"0\",         \"align\": \"left\",         \"valign\": \"middle\"         });       if(bcc_data.link) {       bcc_html = $K('<a>').attr(         {\"class\": \"KOBJ_bcc\",          \"href\": bcc_data.link,  \t\"title\": bcc_data.text  \t}).append(bcc_html);     }       var td1 = $K('<td>').append(bcc_html);     var td2 = $K('<td>').attr(                  {\"bgcolor\": '#ccffcc'  \t\t}).text(bcc_data.text);       bcc_html = $K('<table>').css('padding','10px').append(                      $K('<tr>').append(td1).append(td2)  \t\t    );       return $K(container_tag).append(bcc_html);  };      $K(\"#yls-results tbody\").each(function() {   var pn = $K(this).find(\"span.tel\").text().replace(/\\(|\\)|-|\\.|\\s/g,'');   var o = KOBJ.pick(KOBJ['data']['bcc'][pn]);   if(o)  {     $K(this).find(\"td.yls-rs-bizinfo\").append(KOBJ_bcc_html(o, '<div>'));   }  });                        "}],"post":null,"pre":[],"name":"bccyahoolocal","start_col":5,"emit":null,"state":"active","callbacks":{"success":[{"attribute":"class","trigger":null,"value":"KOBJ_bcc","type":"click"}],"failure":null},"pagetype":{"event_expr":{"pattern":"^http://local.yahoo.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":32},{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"datasets","type":"str"}],"type":"qualified"},{"val":"bcc","type":"str"}],"type":"ineq","op":"like"},"blocktype":"every","actions":[{"label":null,"emit":"var KOBJ_bcc_html = function(bcc_data, container_tag) {     var bcc_html = $K('<img>').attr(        {\"src\": \"http://frag.kobj.net/clients/15/images/BCC_logo.png\",         \"border\": \"0\",         \"align\": \"left\",         \"valign\": \"middle\"         });       if(bcc_data.link) {       bcc_html = $K('<a>').attr(         {\"class\": \"KOBJ_bcc\",          \"href\": bcc_data.link,  \t\"title\": bcc_data.text  \t}).append(bcc_html);     }       var td1 = $K('<td>').append(bcc_html);     var td2 = $K('<td>').attr(                  {\"bgcolor\": '#ccffcc'  \t\t}).text(bcc_data.text);       bcc_html = $K('<table>').css('padding','10px').append(                      $K('<tr>').append(td1).append(td2)  \t\t    );       return $K(container_tag).append(bcc_html);  };    $K(\"ul.listingLayout ol.linklist > li\").each(function() {   var pn = $K(this).find(\"ul.linklistNoBullets li:eq(1)\").text().split(\"|\").pop();   pn = pn.replace(/\\(|\\)|-|\\.|\\s/g,'');   var o = KOBJ.pick(KOBJ['data']['bcc'][pn]);   if(o)  {     $K(this).find(\"ul.linklistNoBullets\").append(KOBJ_bcc_html(o, '<li>'));   }    });                          "}],"post":null,"pre":[],"name":"bccbostonsearch","start_col":5,"emit":null,"state":"active","callbacks":{"success":[{"attribute":"class","trigger":null,"value":"KOBJ_bcc","type":"click"}],"failure":null},"pagetype":{"event_expr":{"pattern":"^http://search.boston.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":49},{"cond":{"args":[{"source":"page","predicate":"env","args":[{"val":"datasets","type":"str"}],"type":"qualified"},{"val":"bcc","type":"str"}],"type":"ineq","op":"like"},"blocktype":"every","actions":[{"label":null,"emit":"var KOBJ_bcc_html = function(bcc_data, container_tag) {     var bcc_html = $K('<img>').attr(        {\"src\": \"http://frag.kobj.net/clients/15/images/BCC_logo.png\",         \"border\": \"0\",         \"align\": \"left\",         \"valign\": \"middle\"         });       if(bcc_data.link) {       bcc_html = $K('<a>').attr(         {\"class\": \"KOBJ_bcc\",          \"href\": bcc_data.link,  \t\"title\": bcc_data.text  \t}).append(bcc_html);     }       var td1 = $K('<td>').append(bcc_html);     var td2 = $K('<td>').attr(                  {\"bgcolor\": '#ccffcc'  \t\t}).text(bcc_data.text);       bcc_html = $K('<table>').css('padding','10px').append(                      $K('<tr>').append(td1).append(td2)  \t\t    );       return $K(container_tag).append(bcc_html);  };    var KOBJ_insert_bcc_ol= function(rlist_selector, phone_selector) {    $K(rlist_selector).each(function() {     var pn = $K(this).find(phone_selector).text().replace(/\\(|\\)|-|\\.|\\s/g,'');     var o = KOBJ.pick(KOBJ['data']['bcc'][pn]);     if(o)  {       $K(this).append(KOBJ_bcc_html(o, '<div>'));     }    });    return true;  };    var KOBJ_bcc_yelp_binder = function() {    $K(\"#searchLayoutFilters li\").click(function(e){      setTimeout(      \"KOBJ_insert_bcc_ol('#businessresults div.businessresult','div.phone');KOBJ_bcc_yelp_binder();\",      5000);    });  };    KOBJ_insert_bcc_ol('#businessresults div.businessresult','div.phone');  KOBJ_bcc_yelp_binder();                      "}],"post":null,"pre":[],"name":"bccyelp","start_col":5,"emit":null,"state":"active","callbacks":{"success":[{"attribute":"class","trigger":null,"value":"KOBJ_bcc","type":"click"}],"failure":null},"pagetype":{"event_expr":{"pattern":"^http://www.yelp.com","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":66}],"meta_start_col":5,"meta":{"logging":"on","name":"BCC Production","meta_start_line":2,"meta_start_col":5},"dispatch_start_line":6,"global_start_col":5,"ruleset_name":"a37x5"}
