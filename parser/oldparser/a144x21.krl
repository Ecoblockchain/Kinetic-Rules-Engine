{"global":[{"source":"http://fmm.kynetx.com/lookup/","name":"maps","type":"datasource","datatype":"JSON","cachable":{"period":"seconds","value":"1"}}],"global_start_line":15,"dispatch":[],"dispatch_start_col":1,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"notify","args":[{"val":"Maps for #{d}","type":"str"},{"val":"detailbox","type":"var"}],"modifiers":[{"value":{"val":"true","type":"bool"},"name":"sticky"}],"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"source":"page","predicate":"url","args":[{"val":"domain","type":"str"}],"type":"qualified"},"lhs":"d","type":"expr"},{"rhs":"<div id=\"KOBJDetailBox\"></div>\n    ","lhs":"detailbox","type":"here_doc"}],"name":"lookupmaps","start_col":1,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":".*","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":19},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"append","args":[{"val":"#KOBJDetailBox","type":"str"},{"val":"#{regexstring}<br/> ","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"obj":{"val":"map","type":"var"},"args":[{"val":"$.regex","type":"str"}],"name":"pick","type":"operator"},"lhs":"regexstring","type":"expr"}],"name":"listmaps","start_col":1,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":".*","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[{"expr":{"source":"datasource","predicate":"maps","args":[{"source":"page","predicate":"url","args":[{"val":"domain","type":"str"}],"type":"qualified"}],"type":"qualified"},"var":["map"]}]},"start_line":30},{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"append","args":[{"val":"#KOBJDetailBox","type":"str"},{"val":"Matching Map!<br/>#{fields}<br/> ","type":"str"}],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":[{"rhs":{"obj":{"val":"map","type":"var"},"args":[{"val":"$.regex","type":"str"}],"name":"pick","type":"operator"},"lhs":"regexstring","type":"expr"},{"rhs":{"args":[{"source":"page","predicate":"url","args":[{"val":"protocol","type":"str"}],"type":"qualified"},{"args":[{"val":"://","type":"str"},{"args":[{"source":"page","predicate":"url","args":[{"val":"hostname","type":"str"}],"type":"qualified"},{"args":[{"source":"page","predicate":"url","args":[{"val":"path","type":"str"}],"type":"qualified"},{"source":"page","predicate":"url","args":[{"val":"query","type":"str"}],"type":"qualified"}],"type":"prim","op":"+"}],"type":"prim","op":"+"}],"type":"prim","op":"+"}],"type":"prim","op":"+"},"lhs":"fullurl","type":"expr"},{"rhs":{"val":"/","type":"str"},"lhs":"slash","type":"expr"},{"rhs":{"obj":{"val":"regexstring","type":"var"},"args":[{"obj":{"args":[{"val":"/","type":"str"},{"args":[{"val":"slash","type":"var"},{"val":"/g","type":"str"}],"type":"prim","op":"+"}],"type":"prim","op":"+"},"args":[{"val":"regexp","type":"str"}],"name":"as","type":"operator"},{"val":"\\/","type":"str"}],"name":"replace","type":"operator"},"lhs":"excp","type":"expr"},{"rhs":{"obj":{"args":[{"val":"/","type":"str"},{"args":[{"val":"excp","type":"var"},{"val":"/","type":"str"}],"type":"prim","op":"+"}],"type":"prim","op":"+"},"args":[{"val":"regexp","type":"str"}],"name":"as","type":"operator"},"lhs":"rexp","type":"expr"},{"rhs":{"obj":{"val":"fullurl","type":"var"},"args":[{"obj":{"val":"rexp","type":"var"},"args":[{"val":"regexp","type":"str"}],"name":"as","type":"operator"},{"val":"","type":"str"}],"name":"replace","type":"operator"},"lhs":"replaced","type":"expr"},{"rhs":{"obj":{"val":"map","type":"var"},"args":[{"val":"$.fields","type":"str"}],"name":"pick","type":"operator"},"lhs":"fields","type":"expr"}],"name":"showmatchingmap","start_col":1,"emit":null,"state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":".*","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[{"expr":{"source":"datasource","predicate":"maps","args":[{"source":"page","predicate":"url","args":[{"val":"domain","type":"str"}],"type":"qualified"}],"type":"qualified"},"var":["map"]}]},"start_line":41}],"meta_start_col":1,"meta":{"logging":"on","name":"FormFill MapList","meta_start_line":2,"author":"Sam Curren","description":"Shows maps that exist for the current domain \n  ","meta_start_col":1},"dispatch_start_line":11,"global_start_col":1,"ruleset_name":"a144x21"}
