{"global":[{"emit":"KOBJ.search_percolate = {};        KOBJ.search_percolate.defaults = {};        KOBJ.search_percolate.defaults = {    \t\"name\":\"KOBJ\",    \t\"sep\":\"<div></div>\",    \t\"text_color\":\"#CCC\",    \t\"height\":\"100px\",    \t\"font_size\":\"12px\",    \t\"class\":\"KOBJ_item\",    \t\"font_family\": \"Verdana, Geneva, sans-serif\",        \t\"title\":\"Percolation Results\",    \t\"site\": {    \t\t\"www.google.com\": {        \t\t\t\"parem\": \"start\",    \t\t\t\"mainSelector\": \"#res\",    \t\t\t\"backupSelector\": \"#ssb\",    \t\t\t\"resultNumParem\": \"num=90\",    \t\t\t\"resultElement\": \"li.g, div.g\",    \t\t\t\"actionMain\":\"before\",    \t\t\t\"actionBackup\":\"after\",    \t\t\t\"watcher\":\"#rso\",    \t\t\t\"urlSel\":\".l\",    \t\t\t\"seperator_css\":{},    \t\t\t\"div_css\":{    \t\t\t\t\"padding-bottom\": \"3px\",    \t\t\t\t\"padding-left\": \"16px\",    \t\t\t\t\"padding-right\": \"5px\",    \t\t\t\t\"max-width\": \"48em\",    \t\t\t\t\"min-height\": \"100px\"    \t\t\t},    \t    \t\t\t\"ol_css\": {    \t\t\t\t\"display\": \"block\",    \t\t\t\t\"padding-top\":\"0px\",    \t\t\t\t\"list-style\":\"none\",    \t\t\t\t\"padding-left\":\"0px\"    \t\t\t}        \t\t},    \t\t    \t\t\"www.bing.com\": {    \t\t\t\"parem\": \"first\",    \t\t\t\"mainSelector\":\"#wg0\",    \t\t\t\"backupSelector\":\".sb_ph\",    \t\t\t\"resultNumParem\": \"count=100\",    \t\t\t\"resultElement\":\"#results>ul>li\",    \t\t\t\"actionMain\":\"prepend\",    \t\t\t\"actionBackup\":\"before\",    \t\t\t\"watcher\": \"\",    \t\t\t\"urlSel\":\".nc_tc a, .sb_tlst a\",    \t\t\t\"seperator_css\":{},    \t\t\t\"div_css\":{    \t\t\t\t\"padding-bottom\": \"3px\",    \t\t\t\t\"padding-left\": \"0px\",    \t\t\t\t\"padding-right\": \"5px\",    \t\t\t\t\"max-width\": \"48em\",    \t\t\t\t\"min-height\": \"100px\"    \t\t\t},    \t\t    \t\t\t\"ol_css\": {    \t\t\t\t\"display\": \"block\",    \t\t\t\t\"padding-top\":\"18px\",    \t\t\t\t\"list-style\":\"none\",    \t\t\t\t\"padding-left\":\"0px\"    \t\t\t}    \t\t},        \t\t\"search.yahoo.com\": {    \"seperator_css\":\"\",    \t\t\t\"parem\": \"b\",    \t\t\t\"mainSelector\":\"#web > ol\",    \t\t\t\"backupSelector\":\"#main\",    \t\t\t\"resultNumParem\": \"n=100\",    \t\t\t\"resultElement\":\"li div.res\",    \t\t\t\"actionMain\":\"prepend\",    \t\t\t\"actionBackup\":\"prepend\",    \t\t\t\"watcher\": \"\",    \t\t\t\"urlSel\":\".yschttl\",    \t\t\t\"seperator_css\":{},    \t\t\t\"div_css\":{    \t\t\t\t\"padding-bottom\": \"0px\",    \t\t\t\t\"padding-left\": \"0px\",    \t\t\t\t\"padding-right\": \"5px\",    \t\t\t\t\"max-width\": \"48em\",    \t\t\t\t\"min-height\": \"75px\"    \t\t\t},    \t\t    \t\t\t\"ol_css\": {    \t\t\t\t\"display\": \"block\",    \t\t\t\t\"padding-top\":\"0px\",    \t\t\t\t\"list-style\":\"none\",    \t\t\t\t\"padding-left\":\"0px\"    \t\t\t}    \t\t}    \t}    };        KOBJ.annotate_search_extractdata = function(toAnnotate,config){        \tvar annotateData = {};    \tvar urlSelector = config.site[window.location.host].urlSel;    \tvar urlTemp = $K(toAnnotate).find(urlSelector).attr(\"href\");        \tif(!urlTemp){    \t\turlTemp = $K(toAnnotate).find(\".url, cite\").attr(\"href\");    \t\t  \t}        \tif(window.location.host == \"search.yahoo.com\"){    \t\turlTemp = urlTemp.replace(/.*\\*\\*/,\"\");    \t\turlTemp = urlTemp.replace(/%3a/,\":\");    \t}        \tif(urlTemp){    \t\tannotateData[\"url\"] = urlTemp;    \t\tdomainTemp = KOBJ.get_host(urlTemp);    \t\tannotateData[\"domain\"] = domainTemp;    \t} else {    \t\tannotateData[\"url\"] = \"\";    \t\tannotateData[\"domain\"] = \"\";    \t}    \treturn annotateData;    };        KOBJ.percolate = function(selector, config) {        \tvar defaults = jQuery.extend(true, {}, KOBJ.search_percolate.defaults);    \t    \tif (typeof config === 'object') {    \t\tjQuery.extend(true, defaults, config);    \t}    \tsite_defaults = defaults.site[window.location.host];        \tfunction percolate_search_results(selector,config){    \t    \t\tvar defaults = jQuery.extend(true, {}, KOBJ.search_percolate.defaults);    \t    \t\tif (typeof config === 'object') {    \t\t\tjQuery.extend(true, defaults, config);    \t\t}    \t    \t\tsite_defaults = defaults.site[window.location.host];            \t\tfunction mk_list_item(i) {    \t\t\treturn $K(i).attr({\"class\": defaults[\"class\"]}).css({\"margin-bottom\":\"5px\"});    \t\t}    \t\t    \t\tfunction mk_rm_div (anchor) {    \t\t\tvar logo_item = mk_list_item(anchor);    \t\t\tvar title = $K(\"<h2>\").text(defaults.title).css({    \t\t\t\t\"margin\": \"3px\",    \t\t\t\t\"color\": \"#676767\",    \t\t\t\t\"font-size\":\"small\",    \t\t\t\t\"font-family\":\"arial,sans-serif\"    \t\t\t});    \t\t\tvar top_box = $K('<ol>').css(site_defaults.ol_css).attr(\"id\", defaults.name+\"_top_box\").append(logo_item);    \t\t\tvar inner_div = $K('<div>').css(site_defaults.seperator_css).append(top_box);    \t\t\tif (defaults.tail_background_image){    \t\t\t\tinner_div.css({    \t\t\t\t\t\"background-image\": \"url(\" + defaults.tail_background_image + \")\",    \t\t\t\t\t\"background-repeat\": \"no-repeat\",    \t\t\t\t\t\"background-position\": \"right top\"    \t\t\t\t});    \t\t\t}    \t\t    \t\t\tvar rm_div = $K('<div>').attr({\"class\":\"cxx\"}).css(site_defaults.div_css).append(inner_div);    \t\t\tif (defaults.head_background_image){    \t\t\t\trm_div.css({    \t\t\t\t\t\"background-image\": \"url(\" + defaults.head_background_image +\")\",    \t\t\t\t\t\"background-repeat\": \"no-repeat\",    \t\t\t\t\t\"background-position\": \"left top\"    \t\t\t\t});    \t\t\t}    \t\t\treturn rm_div;    \t\t}    \t    \t\tfunction move_item (obj) {    \t\t\tif($K('#'+ defaults.name+ '_top_box').find(\"li\").is('.'+ defaults.name+ '_item')) {    \t\t\t\t$K('#'+ defaults.name+ '_top_box').append(defaults.sep).append(mk_list_item(obj));    \t\t\t} else {    \t\t\t\tif($K(site_defaults.mainSelector).size() !== 0) {    \t\t\t\t\t$K(site_defaults.mainSelector)[site_defaults.actionMain](mk_rm_div(obj));    \t\t\t\t} else {    \t\t\t\t\t$K(site_defaults.backupSelector)[site_defaults.actionBackup](mk_rm_div(obj));    \t\t\t\t}    \t\t\t}    \t\t}        \t\tfunction serpslurp(){    \t\t\t  \t\t\tvar cloc = document.location.toString();    \t\t\t    \t\t\tvar nextParem = site_defaults.parem;    \t\t\t    \t\t\tvar regExp = new RegExp(\"(\"+nextParem+\")=(\\\\d+)\"); \t\t    \t    \t\t\tvar m;    \t\t\tvar start = 0;    \t\t\ttry { m = cloc.match(regExp);    \t\t\t\tstart = parseInt(m[2]);    \t\t\t    } catch(err) {}    \t\t\tvar next = (start+10).toString();    \t\t\tif(m) {    \t\t\t    cloc = cloc.replace(regExp, nextParem + next);    \t\t\t} else {    \t\t\t    cloc = cloc + \"&\" + nextParem + \"=\" + next;    \t\t\t}    \t\t\ttry {    \t\t\t\tm = cloc.match(regExp);    \t\t\t\tstart = parseInt(m[2]);    \t\t\t} catch(err) {        \t\t\t}    \t\t\tvar next = (start+10).toString();    \t\t\tif(m) {    \t\t\t    cloc = cloc.replace(regExp, nextParem + next);    \t\t\t} else {    \t\t\t    cloc = cloc + \"&\" + nextParem + \"=\" + next;    \t\t\t}    \t\t\tcloc += \"&\"+site_defaults.resultNumParem;    \t\t\treturn cloc;    \t\t}    \t    \t\t  \t\t$K(site_defaults.resultElement).each(function() {    \t\tvar data = this;    \t\t\tvar extractedData = KOBJ.annotate_search_extractdata(data,defaults);    \t\t\t$K.each(extractedData, function(name, value){    \t\t\t\t$K(data).data(name, value);    \t\t\t});    \t\t\tif (selector(data)) {    \t\t\t\tmove_item(data);    \t\t\t}    \t\t});    \t    \t\t  \t\t$K.get(serpslurp(), function(res) {    \t\t\t$K(site_defaults.resultElement, res).each(function() {    \t\t\t\tvar data = this;    \t\t\t\tvar extractedData = KOBJ.annotate_search_extractdata(data,defaults);    \t\t\t\t$K.each(extractedData, function(name, value){    \t\t\t\t\t$K(data).data(name, value);    \t\t\t\t});    \t\t\t\tif (selector(data)) {    \t\t\t\t\tmove_item(data);    \t\t\t\t}    \t\t\t});    \t\t});    \t}        \tpercolate_search_results(selector,config);    \t    \tvar watcher = defaults.site[window.location.host].watcher;        \tif(watcher){    \t\tKOBJ.watchDOM(watcher,function(){percolate_search_results(selector,config);});    \t}    \t    };                        "}],"global_start_line":6,"dispatch":[],"dispatch_start_col":null,"meta_start_line":2,"rules":[{"cond":{"val":"true","type":"bool"},"blocktype":"every","actions":[{"action":{"source":null,"name":"noop","args":[],"modifiers":null,"vars":null},"label":null}],"post":null,"pre":null,"name":"percolate","start_col":5,"emit":"percolate_data = {  \t'www.confettiantiques.com':{},  \t'www.makeicecream.com':{},  \t'www.plug.org':{},  \t'www.swopnet.com':{},  \t'www.jessiemorris.com':{},  \t'twitter.com':{}  };      function percolate_selector(obj){    var host = $K(obj).data(\"domain\");    var o = percolate_data[host];    if(typeof(o)!=\"undefined\") {       return true;    } else {       return false;    }  }    KOBJ.percolate(percolate_selector,{});              ","state":"active","callbacks":null,"pagetype":{"event_expr":{"pattern":"http://www.google.com/|http://www.bing.com|http://search.yahoo.com/","legacy":1,"type":"prim_event","vars":[],"op":"pageview"},"foreach":[]},"start_line":10}],"meta_start_col":5,"meta":{"logging":"off","name":"Percolation","meta_start_line":2,"meta_start_col":5},"dispatch_start_line":null,"global_start_col":5,"ruleset_name":"a41x83"}
